# 官方指令 - 获取记录 - V1.0.0

## 指令名称

GetRecords / 获取记录

## 功能描述

从指定的 ABS 数据表（由 `base_id` 和 `table_id` 标识）中获取数据记录。可以通过可选的视图 ID 来应用预定义的筛选和排序规则。

## 使用说明

1. 在工作流画布中添加"获取记录"节点
2. 配置节点的输入参数：
   * **所属数据库 Base ID (`base_id`) (必填):** 目标数据表所在的 ABS 数据库的 ID
   * **目标数据表 Table ID (`table_id`) (必填):** 要获取记录的数据表的 ID
   * **（可选）视图 ID (`view_id`):** 指定预定义的 ABS 视图 ID，将应用该视图的筛选和排序规则
3. 将节点的输入连接到前序节点（获取 `base_id`, `table_id` 等）
4. 将节点的输出连接到需要使用这些数据的后续节点
5. 执行工作流

## 注意事项

* **权限:** 执行此操作需要在目标 ABS 数据表上拥有**读取**记录的权限
* **视图使用:** 如果提供了 `view_id`，将按照视图预设的筛选和排序规则获取数据
* **性能:** 对非常大的数据表执行查询可能会消耗较多资源
* **数据量:** 单次请求返回的记录数可能受到平台限制

## 入参

| 参数名    | 参数说明                                                      | 是否必填 | 用户是否配置 |
|:---------|:-------------------------------------------------------------|:--------|:------------|
| base_id  | 所属 ABS 数据库的 Base ID                                      | 是      | 是          |
| table_id | 目标 ABS 数据表的 Table ID                                     | 是      | 是          |
| view_id  | (可选) ABS 视图的 ID。如果提供，将按视图的配置获取数据           | 否      | 是          |

**请求体示例:**
```json
{
  "base_id": "base_xyz789",
  "table_id": "tbl_abc123",
  "view_id": "viw_priority_tasks"
}
```

## 出参

| 参数名    | 参数说明                                                        |
|:---------|:--------------------------------------------------------------|
| success  | 布尔值，指示操作是否成功执行                                      |
| records  | (如果 success 为 true) 包含获取到的记录对象的数组                 |
| count    | (如果 success 为 true) 本次响应返回的记录数量                    |
| message  | 操作结果的消息                                                  |

**响应体示例:**
```json
{
  "success": true,
  "records": [
    {
      "record_id": "rec_abc111",
      "任务名称": "设计新版 Logo",
      "负责人": ["user_id_456"],
      "截止日期": "2024-05-15"
    }
  ],
  "count": 1,
  "message": "Successfully retrieved records."
}
```

## 错误码与异常说明

| 错误码 | 说明                               | 处理建议                                             |
|:------|:----------------------------------|:---------------------------------------------------|
| DB002 | 身份验证失败                        | 检查系统配置的 ABS Token 是否有效                      |
| DB005 | 权限不足                           | 确认执行工作流的凭证具有读取权限                        |
| DB008 | 指定的数据库不存在或无权访问          | 确认 base_id 是否正确                               |
| DB010 | 指定的数据表未找到                   | 确认 table_id 是否正确                              |
| DB011 | 指定的视图无效或未找到               | 确认 view_id 是否正确                               |

## 权限要求

* **需要登录:** 是
* **具体权限:** 需要对目标 ABS 数据表拥有**读取**权限

## 依赖关系

* 目标 ABS 数据库和数据表必须存在且可访问
* 如果使用 view_id，该视图必须存在于目标表中
* 通常需要前置的"连接数据表"节点来获取 table_id
