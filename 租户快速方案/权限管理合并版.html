<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æƒé™ç®¡ç†</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- RemixIcon CDN -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <style>
        /* è‡ªå®šä¹‰æ ·å¼è¡¥å…… */
        .tab-active {
            color: #1f2937;
            border-bottom: 2px solid #1f2937;
        }
        
        .dropdown-icon {
            transition: transform 0.2s;
        }
        
        .dropdown-expanded .dropdown-icon {
            transform: rotate(180deg);
        }
        
        /* ä¸‹æ‹‰èœå•æ ·å¼ */
        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            background-size: 1.25rem;
            padding-right: 2.5rem;
        }
        
        /* éšè—ç±» */
        .hidden {
            display: none;
        }
        
        /* ç”¨æˆ·å¤šé€‰æ¡†æ ·å¼ */
        .user-checkbox {
            cursor: pointer;
        }
        
        .user-checkbox:hover {
            background-color: #f9fafb;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- ä¸»å®¹å™¨ -->
    <div class="min-h-screen">
        <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
        <div class="bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
            <h1 class="text-xl font-semibold text-gray-900">æƒé™ç®¡ç†</h1>
            <button class="text-gray-400 hover:text-gray-600 transition-colors" onclick="window.close()">
                <i class="ri-close-line text-2xl"></i>
            </button>
        </div>

        <!-- æ ‡ç­¾å¯¼èˆª -->
        <div class="bg-white border-b border-gray-200 px-6">
            <div class="flex space-x-8">
                <button 
                    id="tab-members" 
                    class="tab-active py-4 px-1 font-medium text-sm transition-colors"
                    onclick="switchTab('members')">
                    æˆå‘˜ä¸è§’è‰²
                </button>
                <button 
                    id="tab-config" 
                    class="py-4 px-1 font-medium text-sm text-gray-500 hover:text-gray-700 transition-colors"
                    onclick="switchTab('config')">
                    è§’è‰²é…ç½®
                </button>
            </div>
        </div>

        <!-- å†…å®¹åŒºåŸŸ -->
        <div class="mx-auto max-w-5xl p-6">
            
            <!-- æˆå‘˜ä¸è§’è‰²é¡µé¢ -->
            <div id="content-members" class="space-y-4">
                <!-- æœç´¢å’Œæ·»åŠ åŒºåŸŸ -->
                <div class="bg-white rounded-xl border border-gray-200 shadow-sm p-5">
                    <div class="flex items-center justify-between gap-4">
                        <div class="flex-1 relative">
                            <input 
                                type="text" 
                                placeholder="è¯·è¾“å…¥éƒ¨é—¨ã€ä¸ªäººã€ç¾¤ç»„ã€é‚®ä»¶ç»„"
                                class="w-full border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent"
                                aria-label="æœç´¢æˆå‘˜"
                            />
                        </div>
                        <button 
                            class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2.5 rounded-lg text-sm font-medium transition-colors flex items-center gap-2"
                            onclick="showAddMemberModal()">
                            <i class="ri-add-line"></i>
                            æ–°å¢æƒé™
                        </button>
                    </div>
                    
                    <!-- å½“å‰æƒé™ç»Ÿè®¡ -->
                    <div class="mt-4 text-sm text-gray-600">
                        <span class="font-medium">å½“å‰æƒé™ï¼š</span>
                        <span class="text-gray-900 font-semibold">éƒ¨é—¨ 0</span>
                        <span class="mx-2">|</span>
                        <span class="text-gray-900 font-semibold">ä¸ªäºº 2</span>
                    </div>
                </div>

                <!-- éƒ¨é—¨åˆ—è¡¨ -->
                <div class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
                    <div class="border-b border-gray-200 px-5 py-3.5 flex items-center justify-between">
                        <div class="flex items-center gap-2">
                            <span class="text-sm font-semibold text-gray-800">éƒ¨é—¨</span>
                            <span class="text-sm font-semibold text-gray-900">0</span>
                            <button class="ml-2 text-gray-400 hover:text-gray-600">
                                <i class="ri-add-circle-line text-lg"></i>
                            </button>
                        </div>
                    </div>
                    <div class="px-5 py-12 text-center text-gray-400">
                        <i class="ri-folder-3-line text-4xl mb-2"></i>
                        <p class="text-sm">æš‚æ— éƒ¨é—¨æƒé™</p>
                    </div>
                </div>

                <!-- ä¸ªäººåˆ—è¡¨ -->
                <div class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
                    <div class="border-b border-gray-200 px-5 py-3.5 flex items-center justify-between">
                        <div class="flex items-center gap-2">
                            <span class="text-sm font-semibold text-gray-800">ä¸ªäºº</span>
                            <span class="text-sm font-semibold text-gray-900">2</span>
                            <button class="ml-2 text-gray-400 hover:text-gray-600">
                                <i class="ri-add-circle-line text-lg"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- æˆå‘˜åˆ—è¡¨é¡¹ -->
                    <div class="divide-y divide-gray-100">
                        <!-- æˆå‘˜ 1: ç‹å® - æ‰€æœ‰è€… -->
                        <div class="px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                            <div class="flex items-center gap-3 flex-1">
                                <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center">
                                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Crect fill='%233b82f6' width='40' height='40' rx='20'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.35em' fill='white' font-size='16' font-family='sans-serif'%3Eç‹%3C/text%3E%3C/svg%3E" alt="ç‹å®" class="rounded-full" />
                                </div>
                                <div class="flex-1">
                                    <div class="font-medium text-gray-900 text-sm">ç‹å®</div>
                                    <div class="text-xs text-gray-500 mt-0.5">ä¸ªäºº</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <span class="text-sm font-medium text-gray-700">æ‰€æœ‰è€…</span>
                                <div class="text-gray-300">
                                    <i class="ri-lock-line"></i>
                                </div>
                            </div>
                        </div>

                        <!-- æˆå‘˜ 2: å‘¨ä¸½å¨œ - å¯ç¼–è¾‘ -->
                        <div class="px-5 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                            <div class="flex items-center gap-3 flex-1">
                                <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center">
                                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Crect fill='%2310b981' width='40' height='40' rx='20'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.35em' fill='white' font-size='16' font-family='sans-serif'%3Eå‘¨%3C/text%3E%3C/svg%3E" alt="å‘¨ä¸½å¨œ" class="rounded-full" />
                                </div>
                                <div class="flex-1">
                                    <div class="font-medium text-gray-900 text-sm">å‘¨ä¸½å¨œ</div>
                                    <div class="text-xs text-gray-500 mt-0.5">ä¸ªäºº</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <select 
                                    class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent"
                                    aria-label="é€‰æ‹©è§’è‰²">
                                    <option value="editor">å¯ç¼–è¾‘</option>
                                    <option value="viewer">å¯æŸ¥çœ‹</option>
                                    <option value="commenter">å¯è¯„è®º</option>
                                </select>
                                <button class="text-gray-400 hover:text-red-500 transition-colors">
                                    <i class="ri-close-line text-xl"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- é«˜çº§è®¾ç½®é“¾æ¥ -->
                <div class="text-center py-4">
                    <button 
                        class="text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors"
                        onclick="switchTab('config')">
                        é«˜çº§è®¾ç½®ï¼šé…ç½®è¯¦ç»†æƒé™ â†’
                    </button>
                </div>
            </div>

            <!-- è§’è‰²é…ç½®é¡µé¢ -->
            <div id="content-config" class="space-y-6 hidden">
                
                <!-- è¡¨æ ¼æƒé™éƒ¨åˆ† -->
                <div class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
                    <div class="border-b border-gray-200 px-6 py-4 flex items-center justify-between">
                        <h2 class="text-base font-semibold text-gray-900">è¡¨æ ¼æƒé™</h2>
                        <button class="text-sm text-gray-600 hover:text-gray-900 transition-colors flex items-center gap-1">
                            <i class="ri-restart-line"></i>
                            <span>é‡ç½®æƒé™</span>
                        </button>
                    </div>
                    
                    <div class="divide-y divide-gray-100">
                        <!-- Who can create records -->
                        <div class="px-6 py-4 flex items-center justify-between">
                            <div class="flex-1">
                                <label class="text-sm text-gray-900" for="create-permission">Who can create records</label>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="flex items-center gap-2 text-green-600">
                                    <i class="ri-edit-line text-base"></i>
                                    <select 
                                        id="create-permission"
                                        class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent min-w-[180px]"
                                        aria-label="åˆ›å»ºè®°å½•æƒé™">
                                        <option value="editors-up">Editors & up</option>
                                        <option value="creators-up">Creators & up</option>
                                        <option value="commenters-up">Commenters & up</option>
                                        <option value="viewers-up">Viewers & up</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Who can delete records -->
                        <div class="px-6 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex-1">
                                    <label class="text-sm text-gray-900" for="delete-permission">Who can delete records</label>
                                </div>
                                <div class="flex items-center gap-2">
                                    <div class="flex items-center gap-2 text-green-600">
                                        <i class="ri-edit-line text-base"></i>
                                        <select 
                                            id="delete-permission"
                                            class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent min-w-[180px]"
                                            aria-label="åˆ é™¤è®°å½•æƒé™"
                                            onchange="handleDeletePermissionChange(this)">
                                            <option value="editors-up">Editors & up</option>
                                            <option value="creators-up">Creators & up</option>
                                            <option value="specific-users">Specific users</option>
                                            <option value="no-one">No one</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Specific users é€‰æ‹©æ¡† (é»˜è®¤éšè—) -->
                            <div id="specific-users-section" class="mt-4 hidden">
                                <div class="bg-gray-50 rounded-lg border border-gray-200 p-4">
                                    <div class="text-sm font-medium text-gray-700 mb-3">é€‰æ‹©ç‰¹å®šç”¨æˆ·</div>
                                    <div class="space-y-2 max-h-48 overflow-y-auto">
                                        <!-- ç”¨æˆ·é€‰é¡¹ -->
                                        <label class="user-checkbox flex items-center gap-3 p-2 rounded-lg">
                                            <input type="checkbox" class="w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-900">
                                            <div class="flex items-center gap-2">
                                                <div class="w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-xs font-medium text-blue-700">ç‹</div>
                                                <span class="text-sm text-gray-900">ç‹å®</span>
                                            </div>
                                        </label>
                                        <label class="user-checkbox flex items-center gap-3 p-2 rounded-lg">
                                            <input type="checkbox" class="w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-900">
                                            <div class="flex items-center gap-2">
                                                <div class="w-6 h-6 rounded-full bg-green-100 flex items-center justify-center text-xs font-medium text-green-700">å‘¨</div>
                                                <span class="text-sm text-gray-900">å‘¨ä¸½å¨œ</span>
                                            </div>
                                        </label>
                                        <label class="user-checkbox flex items-center gap-3 p-2 rounded-lg">
                                            <input type="checkbox" class="w-4 h-4 text-gray-900 border-gray-300 rounded focus:ring-gray-900">
                                            <div class="flex items-center gap-2">
                                                <div class="w-6 h-6 rounded-full bg-purple-100 flex items-center justify-center text-xs font-medium text-purple-700">æ</div>
                                                <span class="text-sm text-gray-900">ææ˜</span>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- åˆ—æƒé™éƒ¨åˆ† -->
                <div class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
                    <div class="border-b border-gray-200 px-6 py-4 flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <h2 class="text-base font-semibold text-gray-900">åˆ—æƒé™</h2>
                            <span class="text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full">1/3 fields have custom permissions</span>
                        </div>
                        <button class="text-sm text-gray-600 hover:text-gray-900 transition-colors flex items-center gap-1">
                            <i class="ri-restart-line"></i>
                            <span>é‡ç½®æƒé™</span>
                        </button>
                    </div>
                    
                    <!-- è¡¨å¤´ -->
                    <div class="bg-gray-50 border-b border-gray-200 px-6 py-3">
                        <div class="flex items-center">
                            <div class="flex-1 text-xs font-semibold text-gray-600 uppercase tracking-wider">Field Name</div>
                            <div class="w-64 text-xs font-semibold text-gray-600 uppercase tracking-wider">Edit</div>
                        </div>
                    </div>
                    
                    <!-- å­—æ®µåˆ—è¡¨ -->
                    <div class="divide-y divide-gray-100">
                        <!-- Title å­—æ®µ -->
                        <div class="px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                            <div class="flex items-center gap-3 flex-1">
                                <i class="ri-text text-gray-400"></i>
                                <span class="text-sm text-gray-900">Title</span>
                            </div>
                            <div class="flex items-center gap-2 w-64">
                                <div class="flex items-center gap-2 text-green-600">
                                    <i class="ri-edit-line text-base"></i>
                                    <select 
                                        class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent w-full"
                                        aria-label="Titleå­—æ®µç¼–è¾‘æƒé™">
                                        <option value="editors-up">Editors & up</option>
                                        <option value="creators-up">Creators & up</option>
                                        <option value="commenters-up">Commenters & up</option>
                                        <option value="viewers-up">Viewers & up</option>
                                    </select>
                                </div>
                                <button class="dropdown-icon text-gray-400 hover:text-gray-600 transition-all">
                                    <i class="ri-arrow-down-s-line text-xl"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Description å­—æ®µ -->
                        <div class="px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                            <div class="flex items-center gap-3 flex-1">
                                <i class="ri-align-left text-gray-400"></i>
                                <span class="text-sm text-gray-900">Description</span>
                            </div>
                            <div class="flex items-center gap-2 w-64">
                                <div class="flex items-center gap-2 text-green-600">
                                    <i class="ri-edit-line text-base"></i>
                                    <select 
                                        class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent w-full"
                                        aria-label="Descriptionå­—æ®µç¼–è¾‘æƒé™">
                                        <option value="editors-up">Editors & up</option>
                                        <option value="creators-up">Creators & up</option>
                                        <option value="commenters-up">Commenters & up</option>
                                        <option value="viewers-up">Viewers & up</option>
                                    </select>
                                </div>
                                <button class="dropdown-icon text-gray-400 hover:text-gray-600 transition-all">
                                    <i class="ri-arrow-down-s-line text-xl"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Category å­—æ®µ -->
                        <div class="px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors">
                            <div class="flex items-center gap-3 flex-1">
                                <i class="ri-checkbox-circle-line text-gray-400"></i>
                                <span class="text-sm text-gray-900">Category</span>
                            </div>
                            <div class="flex items-center gap-2 w-64">
                                <div class="flex items-center gap-2 text-green-600">
                                    <i class="ri-edit-line text-base"></i>
                                    <select 
                                        class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent w-full"
                                        aria-label="Categoryå­—æ®µç¼–è¾‘æƒé™">
                                        <option value="editors-up">Editors & up</option>
                                        <option value="creators-up">Creators & up</option>
                                        <option value="commenters-up">Commenters & up</option>
                                        <option value="viewers-up">Viewers & up</option>
                                    </select>
                                </div>
                                <button class="dropdown-icon text-gray-400 hover:text-gray-600 transition-all">
                                    <i class="ri-arrow-down-s-line text-xl"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- è¿”å›é“¾æ¥ -->
                <div class="text-center py-4">
                    <button 
                        class="text-sm text-gray-600 hover:text-gray-900 font-medium transition-colors"
                        onclick="switchTab('members')">
                        â† è¿”å›æˆå‘˜ä¸è§’è‰²
                    </button>
                </div>
            </div>

        </div>
    </div>

    <script>
        // æ ‡ç­¾åˆ‡æ¢åŠŸèƒ½
        function switchTab(tabName) {
            // æ›´æ–°æ ‡ç­¾æ ·å¼
            const tabs = ['members', 'config'];
            tabs.forEach(tab => {
                const tabBtn = document.getElementById(`tab-${tab}`);
                const content = document.getElementById(`content-${tab}`);
                
                if (tab === tabName) {
                    tabBtn.classList.add('tab-active');
                    tabBtn.classList.remove('text-gray-500', 'hover:text-gray-700');
                    content.classList.remove('hidden');
                } else {
                    tabBtn.classList.remove('tab-active');
                    tabBtn.classList.add('text-gray-500', 'hover:text-gray-700');
                    content.classList.add('hidden');
                }
            });
            
            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // å¤„ç†åˆ é™¤æƒé™ä¸‹æ‹‰å˜åŒ–
        function handleDeletePermissionChange(select) {
            const specificUsersSection = document.getElementById('specific-users-section');
            if (select.value === 'specific-users') {
                specificUsersSection.classList.remove('hidden');
            } else {
                specificUsersSection.classList.add('hidden');
            }
        }

        // æ˜¾ç¤ºæ·»åŠ æˆå‘˜å¼¹çª—ï¼ˆå ä½å‡½æ•°ï¼‰
        function showAddMemberModal() {
            alert('æ‰“å¼€æ·»åŠ æˆå‘˜å¼¹çª—\n\nè¿™é‡Œå¯ä»¥é›†æˆå®é™…çš„æˆå‘˜é€‰æ‹©å™¨ç»„ä»¶');
        }

        // åˆå§‹åŒ–ï¼šç¡®ä¿é»˜è®¤æ˜¾ç¤ºæˆå‘˜ä¸è§’è‰²é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            switchTab('members');
            
            // æ·»åŠ é”®ç›˜å¯¼èˆªæ”¯æŒ
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey || e.metaKey) {
                    if (e.key === '1') {
                        e.preventDefault();
                        switchTab('members');
                    } else if (e.key === '2') {
                        e.preventDefault();
                        switchTab('config');
                    }
                }
            });
        });

        // æ•°æ®å¯¹æ¥å ä½è¯´æ˜
        console.log(`
            ğŸ“‹ æ•°æ®å¯¹æ¥æŒ‡å—
            
            1. æˆå‘˜åˆ—è¡¨æ•°æ®ç»“æ„ç¤ºä¾‹ï¼š
            {
                departments: [],
                members: [
                    { id: 1, name: 'ç‹å®', role: 'owner', avatar: '...', type: 'individual' },
                    { id: 2, name: 'å‘¨ä¸½å¨œ', role: 'editor', avatar: '...', type: 'individual' }
                ]
            }
            
            2. æƒé™é…ç½®æ•°æ®ç»“æ„ç¤ºä¾‹ï¼š
            {
                tablePermissions: {
                    canCreate: 'editors-up',
                    canDelete: 'editors-up',
                    specificUsers: []
                },
                fieldPermissions: [
                    { field: 'Title', edit: 'editors-up' },
                    { field: 'Description', edit: 'editors-up' },
                    { field: 'Category', edit: 'editors-up' }
                ]
            }
            
            3. å…³é”®APIç«¯ç‚¹ï¼ˆå¾…å®ç°ï¼‰ï¼š
            - GET  /api/permissions/members      - è·å–æˆå‘˜åˆ—è¡¨
            - POST /api/permissions/members      - æ·»åŠ æˆå‘˜æƒé™
            - PUT  /api/permissions/members/:id  - æ›´æ–°æˆå‘˜æƒé™
            - DEL  /api/permissions/members/:id  - ç§»é™¤æˆå‘˜æƒé™
            - GET  /api/permissions/config       - è·å–æƒé™é…ç½®
            - PUT  /api/permissions/config       - æ›´æ–°æƒé™é…ç½®
        `);
    </script>
</body>
</html>

