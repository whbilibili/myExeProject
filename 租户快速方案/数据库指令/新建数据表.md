【数据库与向量库】官方指令 - 新建数据表 - V1.0.0

指令名称

CreateTable / 新建数据表

功能描述

在指定的 ABS 应用（数据库）内，创建一个新的数据表，用于存储具体类型的结构化记录。

使用说明

在工作流画布中添加“新建数据表”节点。

配置节点的输入参数，至少需要提供：

所属应用ID (必填): 要在哪个 ABS 应用（数据库）下创建此表。通常来源于“新建数据库”节点的输出或查询得到。

数据表名称 (必填): 新建的数据表的名称。

数据表描述 (可选): 对该数据表的描述信息。

将节点的输入连接到前序节点（获取应用ID、表名等），并将输出连接到后续节点。

执行工作流。

检查节点的输出或对应的 ABS 应用，确认数据表是否已成功创建。

注意事项

权限: 执行此操作需要在目标 ABS 应用上拥有创建表格的权限。系统传递的 token 必须具有此权限。

命名: 数据表名称需遵循 ABS 的命名规范，并且通常需要在同一个应用内唯一。

幂等性: 此操作通常不是幂等的。在同一应用下尝试创建同名数据表会失败。

所属应用: 必须提供一个有效且有权访问的 ABS 应用 ID。

字段/结构: 新建的表需要定义字段（列）才能存储数据。此指令 V1.0.0 版本只创建基础表结构，需要后续步骤（如“添加字段”指令、或到ABS中操作）来完善，或者支持在入参中直接定义简单结构（待定）。

适用场景

在一个已存在的数据库（ABS 应用）中创建新的数据分类存储区。

为项目、任务、日志等创建专门的数据记录表。

自动化数据模型搭建流程的一部分。

入参

参数名

参数说明

是否必填

用户是否配置

base_id

所属 ABS 应用（数据库）的 ID

是

是

table_name

数据表的名称

是

是

desc

数据表的描述

否

是

token

ABS 调用令牌，系统获取，不暴露给用户

是

否 (系统获取)

workspaceID

对应的 ABS 空间 ID （可能需要用于 API 调用上下文）,系统获取，不暴露给用户

是

否 (系统获取)

注意：token 和 workspaceID 由系统根据当前工作流的上下文自动获取并填充，用户无需也无法直接配置。

出参

参数名

参数说明

code

状态码

msg

操作结果的总体消息

table_object

成功创建后返回的新数据表包含详细信息的对象。

此输出可用于后续节点，如向该表中添加字段、写入记录等。

{
  "msg": "创建成功",
  "code": 200,
  "data": {
    "mm": 0,
    "creator": "us1wjjhj9qm9u98b",
    "base_id": "p5czmdg89v5022j",
    "columns": [
      {
        "np": "11",
        "rqd": 1,
        "ns": "0",
        "created_at": "2025-05-07 11:25:42",
        "title": "Id",
        "dt": "int",
        "uidt": "ID",
        "updated_at": "2025-05-07 11:25:42",
        "un": 1,
        "id": "c0xp8j34f7wou1a",
        "order": 1,
        "dtxs": "",
        "base_id": "p5czmdg89v5022j",
        "dtxp": "11",
        "column_name": "id",
        "ai": 1,
        "dtx": "integer",
        "ct": "int(11)",
        "system": 1,
        "source_id": "b5i9dr3khzhmwcp",
        "fk_model_id": "mmu00makpsqoctb",
        "pk": 1
      },
      {
        "rqd": 0,
        "pv": 1,
        "created_at": "2025-05-07 11:25:42",
        "title": "文本",
        "dt": "varchar",
        "uidt": "SingleLineText",
        "updated_at": "2025-05-07 11:25:42",
        "un": 0,
        "id": "c5rlqvszjs0nffg",
        "order": 2,
        "dtxs": "",
        "base_id": "p5czmdg89v5022j",
        "dtxp": "256",
        "column_name": "title",
        "ai": 0,
        "dtx": "specificType",
        "ct": "varchar(256)",
        "system": 0,
        "source_id": "b5i9dr3khzhmwcp",
        "fk_model_id": "mmu00makpsqoctb",
        "pk": 0,
        "clen": "256"
      },
      {
        "rqd": 0,
        "created_at": "2025-05-07 11:25:42",
        "title": "创建时间",
        "dt": "timestamp",
        "uidt": "CreatedTime",
        "updated_at": "2025-05-07 11:25:42",
        "un": 0,
        "id": "cd0ky0ayss02klp",
        "order": 3,
        "dtxs": " ",
        "base_id": "p5czmdg89v5022j",
        "dtxp": "",
        "column_name": "created_at",
        "ai": 0,
        "dtx": "specificType",
        "system": 1,
        "source_id": "b5i9dr3khzhmwcp",
        "fk_model_id": "mmu00makpsqoctb",
        "pk": 0
      },
      {
        "rqd": 0,
        "created_at": "2025-05-07 11:25:42",
        "title": "最后更新时间",
        "dt": "timestamp",
        "uidt": "LastModifiedTime",
        "updated_at": "2025-05-07 11:25:42",
        "un": 0,
        "id": "ct4cnyxiu2auuyy",
        "order": 4,
        "dtxs": " ",
        "base_id": "p5czmdg89v5022j",
        "dtxp": "",
        "column_name": "updated_at",
        "ai": 0,
        "dtx": "specificType",
        "system": 1,
        "source_id": "b5i9dr3khzhmwcp",
        "fk_model_id": "mmu00makpsqoctb",
        "pk": 0
      },
      {
        "rqd": 0,
        "created_at": "2025-05-07 11:25:42",
        "title": "创建人",
        "dt": "varchar",
        "uidt": "CreatedBy",
        "updated_at": "2025-05-07 11:25:42",
        "un": 0,
        "id": "cxcerkx6z7i7yzs",
        "order": 5,
        "dtxs": " ",
        "base_id": "p5czmdg89v5022j",
        "dtxp": "255",
        "column_name": "created_by",
        "ai": 0,
        "dtx": "specificType",
        "system": 1,
        "source_id": "b5i9dr3khzhmwcp",
        "fk_model_id": "mmu00makpsqoctb",
        "pk": 0
      },
      {
        "rqd": 0,
        "created_at": "2025-05-07 11:25:42",
        "title": "更新人",
        "dt": "varchar",
        "uidt": "LastModifiedBy",
        "updated_at": "2025-05-07 11:25:42",
        "un": 0,
        "id": "chw246vqbz3rvlk",
        "order": 6,
        "dtxs": " ",
        "base_id": "p5czmdg89v5022j",
        "dtxp": "255",
        "column_name": "updated_by",
        "ai": 0,
        "dtx": "specificType",
        "system": 1,
        "source_id": "b5i9dr3khzhmwcp",
        "fk_model_id": "mmu00makpsqoctb",
        "pk": 0
      }
    ],
    "created_at": "2025-05-07 11:25:42",
    "description": "222",
    "title": "新建一个表格",
    "type": "table",
    "table_name": "nc_034e__新建一个表格",
    "columnsById": {
      "ct4cnyxiu2auuyy": {
        "rqd": 0,
        "created_at": "2025-05-07 11:25:42",
        "title": "最后更新时间",
        "dt": "timestamp",
        "uidt": "LastModifiedTime",
        "updated_at": "2025-05-07 11:25:42",
        "un": 0,
        "id": "ct4cnyxiu2auuyy",
        "order": 4,
        "dtxs": " ",
        "base_id": "p5czmdg89v5022j",
        "dtxp": "",
        "column_name": "updated_at",
        "ai": 0,
        "dtx": "specificType",
        "system": 1,
        "source_id": "b5i9dr3khzhmwcp",
        "fk_model_id": "mmu00makpsqoctb",
        "pk": 0
      },
      "chw246vqbz3rvlk": {
        "rqd": 0,
        "created_at": "2025-05-07 11:25:42",
        "title": "更新人",
        "dt": "varchar",
        "uidt": "LastModifiedBy",
        "updated_at": "2025-05-07 11:25:42",
        "un": 0,
        "id": "chw246vqbz3rvlk",
        "order": 6,
        "dtxs": " ",
        "base_id": "p5czmdg89v5022j",
        "dtxp": "255",
        "column_name": "updated_by",
        "ai": 0,
        "dtx": "specificType",
        "system": 1,
        "source_id": "b5i9dr3khzhmwcp",
        "fk_model_id": "mmu00makpsqoctb",
        "pk": 0
      },
      "c5rlqvszjs0nffg": {
        "rqd": 0,
        "pv": 1,
        "created_at": "2025-05-07 11:25:42",
        "title": "文本",
        "dt": "varchar",
        "uidt": "SingleLineText",
        "updated_at": "2025-05-07 11:25:42",
        "un": 0,
        "id": "c5rlqvszjs0nffg",
        "order": 2,
        "dtxs": "",
        "base_id": "p5czmdg89v5022j",
        "dtxp": "256",
        "column_name": "title",
        "ai": 0,
        "dtx": "specificType",
        "ct": "varchar(256)",
        "system": 0,
        "source_id": "b5i9dr3khzhmwcp",
        "fk_model_id": "mmu00makpsqoctb",
        "pk": 0,
        "clen": "256"
      },
      "cd0ky0ayss02klp": {
        "rqd": 0,
        "created_at": "2025-05-07 11:25:42",
        "title": "创建时间",
        "dt": "timestamp",
        "uidt": "CreatedTime",
        "updated_at": "2025-05-07 11:25:42",
        "un": 0,
        "id": "cd0ky0ayss02klp",
        "order": 3,
        "dtxs": " ",
        "base_id": "p5czmdg89v5022j",
        "dtxp": "",
        "column_name": "created_at",
        "ai": 0,
        "dtx": "specificType",
        "system": 1,
        "source_id": "b5i9dr3khzhmwcp",
        "fk_model_id": "mmu00makpsqoctb",
        "pk": 0
      },
      "c0xp8j34f7wou1a": {
        "np": "11",
        "rqd": 1,
        "ns": "0",
        "created_at": "2025-05-07 11:25:42",
        "title": "Id",
        "dt": "int",
        "uidt": "ID",
        "updated_at": "2025-05-07 11:25:42",
        "un": 1,
        "id": "c0xp8j34f7wou1a",
        "order": 1,
        "dtxs": "",
        "base_id": "p5czmdg89v5022j",
        "dtxp": "11",
        "column_name": "id",
        "ai": 1,
        "dtx": "integer",
        "ct": "int(11)",
        "system": 1,
        "source_id": "b5i9dr3khzhmwcp",
        "fk_model_id": "mmu00makpsqoctb",
        "pk": 1
      },
      "cxcerkx6z7i7yzs": {
        "rqd": 0,
        "created_at": "2025-05-07 11:25:42",
        "title": "创建人",
        "dt": "varchar",
        "uidt": "CreatedBy",
        "updated_at": "2025-05-07 11:25:42",
        "un": 0,
        "id": "cxcerkx6z7i7yzs",
        "order": 5,
        "dtxs": " ",
        "base_id": "p5czmdg89v5022j",
        "dtxp": "255",
        "column_name": "created_by",
        "ai": 0,
        "dtx": "specificType",
        "system": 1,
        "source_id": "b5i9dr3khzhmwcp",
        "fk_model_id": "mmu00makpsqoctb",
        "pk": 0
      }
    },
    "enabled": 1,
    "updated_at": "2025-05-07 11:25:42",
    "meta": {
      "hasNonDefaultViews": false
    },
    "id": "mmu00makpsqoctb",
    "source_id": "b5i9dr3khzhmwcp",
    "views": [
      {
        "base_id": "p5czmdg89v5022j",
        "show": 1,
        "created_at": "2025-05-07 11:25:42",
        "title": "新建一个表格",
        "type": 3,
        "is_default": 1,
        "create_source": "default",
        "view": {
          "updated_at": "2025-05-07 11:25:42",
          "base_id": "p5czmdg89v5022j",
          "created_at": "2025-05-07 11:25:42",
          "fk_view_id": "vwpcg5zmicm7aqlj",
          "source_id": "b5i9dr3khzhmwcp"
        },
        "updated_at": "2025-05-07 11:25:42",
        "meta": {},
        "id": "vwpcg5zmicm7aqlj",
        "source_id": "b5i9dr3khzhmwcp",
        "fk_model_id": "mmu00makpsqoctb",
        "lock_type": "collaborative",
        "order": 1
      }
    ],
    "order": 3
  }
}

XML 语法

<!-- XML 调用格式，待开发同学提供 -->
<!-- 示例结构 -->
<CreateTable baseId="{{upstream_node.output.database_id}}" tableName="Tasks" description="Project Task List">
  <!-- 可选的字段定义 -->
  <!-- <Fields>
    <Field name="TaskName" type="text" />
    <Field name="DueDate" type="date" />
  </Fields> -->
  <!-- 系统会自动填充 token 和 workspaceID -->
</CreateTable>


Groovy 语法

// Groovy 调用格式，待开发同学提供
// 示例结构
def createTableResult = engine.execute('CreateTable', [
  base_id: previous_step.output.database_id, // Get App ID from previous step
  table_name: "User Feedback",
  desc: "Table to store user feedback entries"
  // fields: [ [name: "Feedback", type: "multiline_text"], [name: "Submitter", type: "user"] ] // Optional fields
])

if (createTableResult.success) {
  println("Table created with ID: " + createTableResult.output.table_id)
} else {
  println("Failed to create table: " + createTableResult.error.message)
}


使用案例

项目管理应用初始化: 在通过“新建数据库”指令创建了“项目管理”应用后，紧接着使用“新建数据表”指令，传入该应用的 ID，分别创建“任务表”、“文档表”、“风险表”等。

分类与标签

数据库, Database, 数据表, Table, Schema, 数据管理

错误码与异常说明

Http状态码

说明

处理建议

说明（已知问题）

400

未知错误

查看工作流执行日志，或联系平台管理员。

401

身份验证失败

检查系统配置的 ABS Token 是否有效或已过期。

400

数据表已存在

在指定的应用下检查数据表名称是否已被使用

未知错误

400

数据表名称无效

检查名称是否符合 ABS 数据表的命名规范（长度、特殊字符等）。

403

权限不足

确认执行工作流的凭证（Token）具有在目标 ABS 应用中创建数据表的权限。

404

指定的应用（数据库）不存在或无权访问

确认传入的 base_id是否正确，以及凭证是否有权访问该应用。

使用超级管理员的token调用该组件时：创建成功

权限与安全要求

执行权限: 执行此指令的工作流或触发用户，其关联的凭证（Token）必须拥有在目标 ABS 应用内创建表格的权限。

数据安全: 指令本身不处理记录数据，创建的数据表的访问权限遵循其所属 ABS 应用和空间的权限设置。

内部参数: token 和 workspaceID 作为内部传递参数，不应暴露给最终用户配置。

依赖关系与前置条件

目标 ABS 应用: 必须存在一个有效的、可通过 base_id 访问的 ABS 应用（数据库）。

有效凭证: 系统必须能够获取到有效的、具有在该应用下创建表格权限的 ABS Token。

命名: 输入的 table_name 需要符合 ABS 的要求，并在应用内唯一。