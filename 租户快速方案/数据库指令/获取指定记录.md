【数据库与向量库】官方指令 - 获取指定记录（指定记录ID） - V1.0.0

指令名称

GetRecordById / 获取指定记录

功能描述

根据提供的一个或多个记录 ID (record_id)，从指定的 ABS 数据表（由 base_id 和 table_id 标识）中精确获取对应的完整记录信息。

使用说明

在工作流画布中添加"获取指定记录"节点。

配置节点的输入参数，需要提供：

所属数据库 Base ID (base_id) (必填): 目标数据表所在的 ABS 数据库的 ID。

目标数据表 Table ID (table_id) (必填): 要获取记录的数据表的 ID。

记录 ID 列表 (record_ids) (必填): 一个包含要获取的记录的唯一 ID 的数组。例如：["rec_abc111", "rec_def222"]。

将节点的输入连接到前序节点（获取 base_id, table_id, record_ids 等）。

将节点的输出 (records 列表等）连接到需要使用这些记录数据的后续节点。

执行工作流。

后续节点处理返回的记录数据。

注意事项

权限: 执行此操作需要在目标 ABS 数据表上拥有读取记录的权限。系统传递的 token 必须具有此权限。

记录存在性: 只有当提供的 record_id 对应的记录存在时，才能获取到该记录。如果列表中的某些 ID 不存在，响应中将不会返回任何记录，只返回错误ID的提示信息。

ID 准确性: 确保提供的 record_ids 列表中的 ID 是正确的。

适用场景

当你已经通过其他方式（如 AddRecord/UpdateRecord 的输出，或 GetRecords 查询）获得了具体的记录 ID，并需要获取这些记录的详细信息时。

在工作流中需要精确操作某几条已知记录之前，先获取它们的最新状态。

根据外部系统传入的记录 ID 来查找并处理 ABS 中的对应数据。

入参

参数名

参数说明

是否必填

用户是否配置

table_id

目标 ABS 数据表的 Table ID

是

是

record_ids

要获取的记录 ID 数组。例：[11, 15]

记录ID的获取方式

1）前序节点的输出，返回的记录数据中包含：Id字段。如：

{
  "最后更新时间": "2025-05-07 10:52:10",
   "创建时间": "2025-04-29 20:39:18",
   "Id": 7,
   "字段6": "更新一个数据"
}

2）登录ABS，选择目标表，点击【字段设置】，选择【显示所有系统字段】，系统字段：Id，即为所有记录的唯一Id

是

是

token

ABS 调用令牌

是

否 (系统获取)

请求体示例 (获取两条指定记录的特定字段):

{
  "table_id": "mh1spz0v27b4isk",
  "record_ids": [11, 15],
}

出参

参数名

参数说明

code

状态码

msg

操作结果的总体消息

data

包含目标记录的详细信息数组以及查询成功的总记录数

响应体示例 (单条):

{
  "msg": "查询成功",
  "code": 200,
  "data": {
    "records": [
      {
        "最后更新时间": "2025-05-07 10:52:10",
        "创建时间": "2025-04-29 20:39:18",
        "Id": 7,
        "字段6": "更新一个数据"
      }
    ],
    "count": 1
  }
}

响应体示例（多条）:

{
  "msg": "查询成功",
  "code": 200,
  "data": {
    "records": [
      {
        "最后更新时间": "2025-05-07 10:52:10",
        "创建时间": "2025-04-29 20:39:18",
        "Id": 7,
        "字段6": "更新一个数据"
      },
      {
        "最后更新时间": "2025-05-07 10:52:10",
        "创建时间": "2025-05-07 10:46:47",
        "Id": 11,
        "字段6": "更新一个数据111"
      }
    ],
    "count": 2
  }
}

响应体示例 (未找到):

// 记录ID数组为空时
{
  "msg": "无匹配数据",
  "code": 200,
  "data": {}
}

XML 语法

<!-- XML 调用格式，待开发同学提供 -->
<!-- 示例结构 -->
<GetRecordById baseId="{{base_id}}" tableId="{{table_id}}">
  <RecordIds>
    <Id>{{record_id_from_upstream}}</Id>
    <Id>rec_def222</Id>
  </RecordIds>
  <Fields>
    <Field>任务名称</Field>
    <Field>状态</Field>
  </Fields>
  <!-- 系统会自动填充 token 和 workspaceID -->
</GetRecordById>


Groovy 语法

// Groovy 调用格式，待开发同学提供
// 示例结构
def recordIdsToFetch = ["rec_abc111", workflow.getVariable("last_updated_record_id")]

def getResult = engine.execute('GetRecordById', [
  base_id: 'base_xyz789',
  table_id: 'tbl_abc123',
  record_ids: recordIdsToFetch,
  fields: ["状态", "负责人"] // Only fetch specific fields
])

if (getResult.success) {
  println("Found ${getResult.output.found_count} records.")
  getResult.output.records.each { record ->
    println("Record ${record.record_id}: Status=${record.'状态'}, Assignee=${record.'负责人'}")
    // Process record data
  }
  if (getResult.output.errors) {
      getResult.output.errors.each { err -> println("Warning: Could not find record ${err.record_id}") }
  }
} else {
  println("Failed to get records by ID: " + getResult.error.message)
}


使用案例

更新后获取完整信息: 工作流先调用 UpdateRecord 更新了某条记录的"状态"字段（该指令现在也返回完整记录了，但假设之前的版本不返回），然后需要获取该记录更新后的所有信息（包括其他未修改的字段）以进行下一步处理，此时可以使用 GetRecordById 指令，传入更新操作返回的 record_id 来获取完整的记录数据。

关联数据展示: 在一个订单处理流程中，通过 GetRecords 找到了符合条件的订单记录（只查询了订单号和客户 ID），然后需要根据客户 ID 列表，调用 GetRecordById 从"客户信息表"中获取这些客户的详细联系方式。

分类与标签

数据库, Database, 数据表, Table, ABS, 读取, 查询, 获取, 指定 ID, Get, By ID, Record, Data Management, CRUD (Read)

错误码与异常说明

Http状态码

说明

处理建议

400

未知错误

查看日志，联系管理员。

401

身份验证失败

检查 Token。

权限与安全要求 (permission)

需要登录: 是。

涉及敏感操作: 可能。取决于所读取的数据是否包含敏感信息。指令本身是数据读取操作。

具体权限: 需要对目标 ABS 数据表拥有读取权限 (具体权限名称依 ABS 平台定义)。

数据安全: 返回的数据可能包含敏感信息，下游节点处理时需注意安全。

依赖关系与前置条件 (dependencies/prerequisites)

目标 ABS 数据库 (Base) 和数据表: 必须存在，且可通过 base_id 和 table_id 访问。

有效凭证: 系统必须能够获取到有效的、具有读取目标表权限的 ABS Token。

有效记录 ID: 必须提供一个或多个有效的 record_id。这些 ID 通常来自前序步骤的输出。