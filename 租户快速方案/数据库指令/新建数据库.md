【数据库与向量库】官方指令 - 新建数据库 - V1.0.0

指令名称

CreateDatabase / 新建数据库

功能描述

在当前 Bots 空间对应的 ABS 空间下，创建一个新的、空的数据库实例（表现为 ABS 应用），用于组织和管理结构化数据。

使用说明

在工作流画布中添加“新建数据库”节点。

配置节点的输入参数，至少需要提供：

数据库名称 (必填): 新建的 ABS 应用的名称。

数据库描述 (可选): 对该 ABS 应用的描述信息。

将节点的输入连接到前序节点（如果需要动态获取参数），并将输出连接到后续节点。

执行工作流。

检查节点的输出或对应的 ABS 空间，确认数据库（ABS 应用）是否已成功创建。

注意事项

权限: 执行此操作需要在对应的 ABS 空间上拥有创建应用的权限。系统传递的 token 必须具有此权限。

命名: 数据库（ABS 应用）名称需遵循 ABS 的命名规范（如长度、允许字符等）。建议使用有意义且在空间内唯一的名称。

幂等性: 此操作通常不是幂等的。如果尝试创建已存在的同名数据库（ABS 应用），操作会失败。工作流设计时应考虑此情况（如添加前置检查或处理失败逻辑）。

资源消耗: 创建 ABS 应用会消耗对应空间的资源配额（若有）。

适用场景

工作流中需要动态创建用于存储和管理结构化数据的容器时。

自动化创建项目、任务或案例相关的数据存储区。

入参

参数名

参数说明

是否必填

用户是否配置

base_name

数据库（ABS 应用）的名称

是

是

desc

数据库（ABS 应用）的描述

否

是

token

ABS 调用令牌，系统获取，不暴露给用户

是

否 (系统获取)

workspaceID

对应的 ABS 空间 ID，系统获取，不暴露给用户

是

否 (系统获取)

注意：token 和 workspaceID 由系统根据当前工作流的上下文自动获取并填充，用户无需也无法直接配置。

出参

参数名

参数说明

base_object

成功创建后返回的新数据库（ABS 应用）包含详细信息的对象。

此输出可用于后续节点，如向该数据库中添加表格、写入数据等。

XML 语法

<!-- XML 调用格式，待开发同学提供 -->
<!-- 示例结构 -->
<CreateDatabase name="{{dynamic_db_name}}" description="Auto-created database">
  <!-- 系统会自动填充 token 和 workspaceID -->
</CreateDatabase>


Groovy 语法

// Groovy 调用格式，待开发同学提供
// 示例结构
def result = engine.execute('CreateDatabase', [
  database_name: "My Project Database " + workflow.instanceId,
  desc: "Database created for workflow instance ${workflow.instanceId}"
])

if (result.success) {
  println("Database created with ID: " + result.output.database_id) // 假设输出包含 ID
} else {
  println("Failed to create database: " + result.error.message)
}


使用案例

项目启动流程: 工作流接收到新项目信息后，自动调用此指令创建一个与项目同名的数据库（ABS 应用），用于存储该项目的任务、文档等结构化数据。后续节点使用此指令的输出 ID 来操作该数据库。

分类与标签

数据库, Database, 基础设施, ABS, 应用创建, 数据管理

错误码与异常说明

Http状态码

说明（msg）

处理建议

说明

400

未知错误。

查看工作流执行日志，联系平台管理员。

401

身份验证失败

检查系统配置的 ABS Token 是否有效或已过期。

token的校验在abs所有逻辑的最上层，这里没法放在接口逻辑里返回，但可以作为工作流错误，进行排查

400

数据库已存在

检查数据库名称是否已被使用，或修改名称/添加前置检查。

通过调用组件创建两个相同的名称的数据库时，无法触发该报错

400

数据库名称无效

检查名称是否符合 ABS 应用的命名规范（长度、特殊字符等）。

403

权限不足

确认执行工作流的凭证（Token）具有在目标 ABS 空间创建应用的权限。

404

空间不存在

输入正确的空间ID

使用超级管理员的token调用该组件的时候，不会触发该报错

权限与安全要求

执行权限: 执行此指令的工作流或触发用户，其关联的凭证（Token）必须拥有在目标 ABS 空间内创建应用的权限。

数据安全: 指令本身不处理用户数据，但创建的数据库（ABS 应用）的访问权限遵循 ABS 平台的标准权限模型。

内部参数: token 和 workspaceID 作为内部传递参数，不应暴露给最终用户配置。

依赖关系与前置条件

ABS 空间: 当前 Bots 空间必须已正确关联一个 ABS 空间。

有效凭证: 系统必须能够获取到有效的、具有创建应用权限的 ABS Token。

命名: 输入的 base_name 需要符合 ABS 的要求。