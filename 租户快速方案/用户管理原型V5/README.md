# 用户管理高保真原型 V5

> 基于用户管理V1.1方案的完整高保真原型，采用飞书设计风格，具备业界顶级标准的UI/UX设计。

## 📋 项目概述

这是一个功能完整、设计精美、交互流畅的用户管理系统高保真原型，完全符合用户管理V1.1.md方案要求。

### 核心特性

- ✅ **完整功能**：涵盖用户列表、详情查看、数据分析等所有功能
- 🎨 **飞书设计**：遵循飞书设计规范，简洁、大气、高级感
- 📊 **数据可视化**：使用ECharts展示丰富的图表和数据分析
- 📱 **响应式设计**：适配桌面端和移动端，支持不同屏幕尺寸
- 🚀 **交互流畅**：细腻的动画效果和即时反馈
- 💾 **Mock数据**：完整的Mock数据系统，无需后端即可体验

## 🗂️ 项目结构

```
用户管理原型V5/
├── index.html              # 用户列表页（入口页面）
├── user-detail.html        # 用户详情页
├── pages/                  # 标签页面（iframe嵌入）
│   ├── overview.html       # 数据总览
│   ├── consumption.html    # 资源消耗明细
│   ├── assets.html         # 资产明细
│   └── tenants.html        # 加入的租户
├── assets/                 # 资源文件
│   ├── css/
│   │   └── feishu-design.css   # 飞书设计系统样式
│   └── js/
│       ├── utils.js            # 工具函数库
│       ├── mock-data.js        # Mock数据生成器
│       └── charts.js           # 图表工具库
└── README.md               # 项目说明文档
```

## 🚀 快速开始

### 方法一：直接打开（推荐）

1. 直接在浏览器中打开 `index.html` 文件
2. 系统会自动加载所有资源和Mock数据
3. 点击用户名称可进入详情页查看更多信息

### 方法二：本地服务器

如果遇到跨域问题（iframe加载失败），可以使用本地服务器：

```bash
# 使用Python
python -m http.server 8000

# 或使用Node.js的http-server
npx http-server -p 8000

# 然后在浏览器访问
http://localhost:8000/index.html
```

## 📖 功能说明

### 1. 用户列表页 (index.html)

**仪表盘统计**
- 用户总数
- 正常用户数
- 已禁用用户数
- 今日新增用户
- 活跃用户数量（最近7天）

**筛选功能**
- 模糊搜索：支持用户名称、ID、手机、邮箱、MIS号
- 状态筛选：全部/正常/已禁用
- 归属租户：多选下拉，支持搜索
- 创建时间：日期范围选择

**用户列表**
- 用户基本信息展示
- 点击用户名进入详情页
- 快速操作：重置密码、禁用/启用、注销
- 修改账号金额（充值/扣除）

### 2. 用户详情页 (user-detail.html)

**详情页头部**
- 用户头像和基本信息
- 编辑用户信息（右侧抽屉）
- 快速操作按钮组

**四个标签页**（iframe嵌入）

#### 2.1 数据总览 (overview.html)
- **全局筛选器**：时间范围、归属租户
- **资产与使用总览**：
  - 资产创建总数（智能体、工作流、工具、工具库、知识库、空间）
  - 核心资产活跃度（运行次数、用户数、token消耗等）
- **积分总览**：
  - 核心指标（总消耗、Token消耗、设备抵扣）
  - 4个可视化图表（趋势图、构成图、排行榜、分布图）
- **核心资源消耗分析**：
  - Token消耗分析（3个图表）
  - 设备时长分析（3个图表）

#### 2.2 资源消耗明细 (consumption.html)
- **高级筛选器**：
  - 时间范围、资源类型、行为关键词
  - 变动类型、计费租户、是否消耗积分
- **资源消耗流水表格**：
  - 详细记录每笔资源消耗
  - 支持排序和分页
  - 一键导出CSV

#### 2.3 资产明细 (assets.html)
- **6个资产类型**（内嵌标签页）：
  - 智能体：运行次数、用户数、对话次数、token消耗
  - 工作流：运行次数、用户数、token消耗、成功率
  - 工具：引用数统计
  - 工具库：状态、类型、工具数
  - 知识库：知识单元、引用次数、占用容量
  - 空间：类型、所有者、更新记录
- 每个列表支持搜索、筛选、排序、分页

#### 2.4 加入的租户 (tenants.html)
- **操作功能**：
  - 添加到租户（模态框多选）
  - 批量移出租户
  - 搜索租户
- **租户列表**：
  - 完整的租户信息
  - 所有者标识（不可移除）
  - 单个/批量移出操作

## 🎨 设计特色

### 飞书设计系统
- 统一的色彩规范（主色、成功、警告、危险）
- 完整的间距系统（基于4px）
- 标准的字体层级和行高
- 精心设计的阴影和圆角
- 流畅的动画效果

### 视觉层次
- 卡片阴影区分不同模块
- 合理的间距和分组
- 清晰的信息架构
- 高对比度的可读性

### 交互体验
- 即时的操作反馈
- 防抖优化的搜索
- Loading状态提示
- Hover效果和焦点状态
- 二次确认的高危操作
- 友好的错误提示

## 🛠️ 技术栈

### 前端框架
- **Vue 3**：响应式前端框架
- **Element Plus**：企业级UI组件库
- **ECharts 5**：专业的数据可视化库

### 设计系统
- 自定义飞书设计系统CSS
- CSS变量系统
- 响应式布局

### 工具库
- 日期格式化
- 数字格式化
- 文本处理
- 防抖节流
- 数据导出

## 📊 Mock数据说明

项目内置完整的Mock数据系统，包括：

- **150个用户**：带有完整的个人信息和租户关联
- **20个租户**：不同版本和类型
- **资产数据**：智能体、工作流、工具、知识库、空间
- **资源消耗记录**：100-300条真实感的资源消耗流水
- **统计数据**：各类汇总和趋势数据

所有数据支持：
- ✅ 搜索和筛选
- ✅ 排序
- ✅ 分页
- ✅ 动态生成

## 🔧 自定义配置

### 修改主题色

编辑 `assets/css/feishu-design.css` 文件中的CSS变量：

```css
:root {
  --primary-color: #3370FF;  /* 修改为你的主色 */
  --success-color: #00B42A;  /* 成功色 */
  --warning-color: #FF7D00;  /* 警告色 */
  --danger-color: #F53F3F;   /* 危险色 */
}
```

### 修改Mock数据

编辑 `assets/js/mock-data.js` 文件：

```javascript
// 修改用户数量
function generateUsers() {
  for (let i = 0; i < 150; i++) {  // 改为你需要的数量
    // ...
  }
}
```

## 📱 浏览器兼容性

- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+

**注意**：需要支持ES6+语法和现代CSS特性。

## 🎯 使用场景

### 开发阶段
- 产品设计评审
- 前端开发参考
- 交互流程演示

### 展示阶段
- 客户方案演示
- 用户体验测试
- 功能培训演示

### 文档阶段
- 需求文档配图
- 开发文档说明
- 测试用例参考

## 📝 注意事项

1. **跨域问题**：如果iframe无法加载，请使用本地服务器
2. **数据持久化**：✅ Mock数据已自动保存到localStorage，刷新页面后数据保持不变
3. **清除数据**：如需重新生成Mock数据，在浏览器控制台执行：`MockData.clearCache()` 然后刷新页面
4. **图表渲染**：首次加载可能需要等待ECharts资源加载
5. **性能优化**：大数据量时建议启用虚拟滚动（需要实际开发）

## ❓ 常见问题

### Q1: 为什么进入用户详情页会提示"用户不存在"？
**A**: 这个问题已在V5版本中解决！Mock数据现在会自动保存到浏览器的localStorage中，确保在不同页面间数据一致性。

如果仍遇到此问题，可能是因为：
1. 浏览器禁用了localStorage
2. 使用隐私模式浏览

**解决方法**：
- 使用正常浏览模式
- 确保浏览器允许localStorage
- 使用本地服务器运行（推荐）

### Q2: 如何重新生成Mock数据？
**A**: 在浏览器控制台执行以下命令：
```javascript
MockData.clearCache()
```
然后刷新页面即可生成新的Mock数据。

### Q3: iframe页面无法加载怎么办？
**A**: 这是跨域问题，使用本地服务器即可解决：
```bash
python -m http.server 8000
# 然后访问 http://localhost:8000/index.html
```

### Q4: 修改的数据会保存吗？
**A**: 在当前版本中，对用户数据的修改（如修改余额、状态等）会立即生效，但刷新页面后会恢复到localStorage中保存的状态。如需持久化修改，需要集成真实的后端API。

## 🔄 版本历史

### V5.0 (当前版本)
- ✅ 从零重新开发，不依赖V4版本
- ✅ 完整实现V1.1方案的所有功能
- ✅ 采用飞书设计风格
- ✅ 详情页使用iframe嵌入标签页
- ✅ 新增数据总览模块（含10+图表）
- ✅ 新增资源消耗明细流水功能
- ✅ 新增6类资产管理
- ✅ 支持CSV导出

## 📞 技术支持

如有问题或建议，请查看：
- 方案文档：`运营后台/用户管理V1.1.md`
- 设计规范：`assets/css/feishu-design.css`

## 📄 许可证

本原型仅供内部演示和开发参考使用。

---

**开发时间**：2025年10月
**版本**：V5.0
**状态**：✅ 已完成

