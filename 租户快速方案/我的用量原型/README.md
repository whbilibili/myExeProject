# 我的用量原型 - 用户个人用量仪表盘

> 面向用户的个人用量查看界面，展示用户在特定租户下的资源配额和使用情况。

## 📋 项目概述

这是一个面向用户的个人用量仪表盘原型，让用户可以查看自己在特定租户下的资源配额、使用进度和详细数据。采用飞书设计风格，提供直观、美观的用户体验。

### 核心特性

- ✅ **配额展示**：清晰展示用户在租户下的资源配额和使用进度
- 🏢 **租户切换**：支持切换不同租户查看对应的用量数据
- 📊 **数据总览**：丰富的图表展示资产创建、使用情况等统计信息
- 📝 **消耗明细**：详细的资源消耗流水记录，支持筛选和导出
- 📦 **资产明细**：完整的资产管理，包括智能体、工作流、工具等
- 🎨 **飞书设计**：遵循飞书设计规范，简洁、大气、高级感
- 📱 **响应式设计**：适配桌面端和移动端

## 🗂️ 项目结构

```
我的用量原型/
├── index.html              # 主页面（配额展示+标签页）
├── pages/                  # 子页面（iframe嵌入）
│   ├── overview.html       # 数据总览
│   ├── consumption.html    # 资源消耗明细
│   └── assets.html         # 资产明细
├── assets/                 # 资源文件
│   ├── css/
│   │   └── feishu-design.css   # 飞书设计系统样式
│   └── js/
│       ├── utils.js            # 工具函数库
│       ├── mock-data.js       # Mock数据生成器
│       └── charts.js          # 图表工具库
└── README.md               # 项目说明文档
```

## 🚀 快速开始

### 方法一：直接打开（推荐）

1. 直接在浏览器中打开 `index.html` 文件
2. 系统会自动加载所有资源和Mock数据
3. 选择租户后即可查看对应的用量信息

### 方法二：本地服务器

如果遇到跨域问题（iframe加载失败），可以使用本地服务器：

```bash
# 使用Python
python -m http.server 8000

# 或使用Node.js的http-server
npx http-server -p 8000

# 然后在浏览器访问
http://localhost:8000/index.html
```

## 📖 功能说明

### 1. 主页面 (index.html)

**租户选择器**
- 下拉选择要查看的租户
- 切换租户时自动更新所有数据

**配额展示区域**
- 云电脑设备使用时长配额
- 进度条显示使用情况
- 配额说明和提示信息

**标签页导航**
- 数据总览：资产统计和使用分析
- 资源消耗明细：详细的消耗流水记录
- 资产明细：各类资产的管理和查看

### 2. 数据总览 (overview.html)

**资产与使用总览**
- 资产创建总数（智能体、工作流、工具、工具库、知识库、空间）
- 核心资产活跃度（运行次数、用户数、token消耗等）

**积分总览**
- 核心指标（总消耗、Token消耗、设备抵扣）
- 4个可视化图表（趋势图、构成图、排行榜、分布图）

**核心资源消耗分析**
- Token消耗分析（3个图表）
- 设备时长分析（3个图表）

### 3. 资源消耗明细 (consumption.html)

**高级筛选器**
- 时间范围、资源类型、行为关键词
- 变动类型、是否消耗积分

**资源消耗流水表格**
- 详细记录每笔资源消耗
- 支持排序和分页
- 一键导出CSV

### 4. 资产明细 (assets.html)

**6个资产类型**（内嵌标签页）：
- 智能体：运行次数、用户数、对话次数、token消耗
- 工作流：运行次数、用户数、token消耗、成功率
- 工具：引用数统计
- 工具库：状态、类型、工具数
- 知识库：知识单元、引用次数、占用容量
- 空间：类型、所有者、更新记录

每个列表支持搜索、筛选、排序、分页

## 🎨 设计特色

### OpenAI风格设计系统
- 统一的色彩规范（主色、成功、警告、危险）
- 完整的间距系统（基于4px）
- **紧凑的字体系统**：最大字体14px，基础字体13px，辅助字体12px
- **简洁的视觉层次**：更小的图标(40px)和更紧凑的导航栏(56px)
- 精心设计的阴影和圆角
- 流畅的动画效果

### 配额展示设计
- 卡片式布局，清晰展示配额信息
- 进度条直观显示使用情况
- 柔和的背景色和清晰的视觉层次
- 响应式设计，适配不同屏幕尺寸

### 交互体验
- 即时的操作反馈
- 防抖优化的搜索
- Loading状态提示
- Hover效果和焦点状态
- 友好的错误提示

## 🛠️ 技术栈

### 前端框架
- **Vue 3**：响应式前端框架
- **Element Plus**：企业级UI组件库
- **ECharts 5**：专业的数据可视化库

### 设计系统
- 自定义飞书设计系统CSS
- CSS变量系统
- 响应式布局

### 工具库
- 日期格式化
- 数字格式化
- 文本处理
- 防抖节流
- 数据导出

## 📊 Mock数据说明

项目内置完整的Mock数据系统，包括：

- **150个用户**：带有完整的个人信息和租户关联
- **20个租户**：不同版本和类型
- **资产数据**：智能体、工作流、工具、知识库、空间
- **资源消耗记录**：100-300条真实感的资源消耗流水
- **配额数据**：用户在各租户下的资源配额信息
- **统计数据**：各类汇总和趋势数据

所有数据支持：
- ✅ 搜索和筛选
- ✅ 排序
- ✅ 分页
- ✅ 动态生成

## 🔧 自定义配置

### 修改主题色

编辑 `assets/css/feishu-design.css` 文件中的CSS变量：

```css
:root {
  --primary-color: #3370FF;  /* 修改为你的主色 */
  --success-color: #00B42A;  /* 成功色 */
  --warning-color: #FF7D00;  /* 警告色 */
  --danger-color: #F53F3F;   /* 危险色 */
}
```

### 字体大小说明（OpenAI风格）

本项目采用OpenAI风格的字体系统，更加紧凑和简洁：

- **最大字体**: 14px（用于标题和重要文字）
- **基础字体**: 13px（用于正文内容）
- **辅助字体**: 12px（用于标签、提示等次要信息）
- **小字体**: 11px、10px（用于非常次要的信息）

数值类字体允许稍大：
- **重要数值**: 24px（如统计卡片的主数值）
- **次要数值**: 20px（如指标卡片的数值）

### 修改Mock数据

编辑 `assets/js/mock-data.js` 文件：

```javascript
// 修改配额类型
function getUserQuota(userId, tenantId) {
  const quotaTypes = [
    {
      name: '云电脑设备使用时长',
      icon: '💻',
      used: MockUtils.randomInt(0, 200),
      total: -1, // -1表示无限制
      unit: '小时'
    }
    // 可以添加更多配额类型
  ];
  // ...
}
```

## 📱 浏览器兼容性

- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+

**注意**：需要支持ES6+语法和现代CSS特性。

## 🎯 使用场景

### 开发阶段
- 产品设计评审
- 前端开发参考
- 交互流程演示

### 展示阶段
- 客户方案演示
- 用户体验测试
- 功能培训演示

### 文档阶段
- 需求文档配图
- 开发文档说明
- 测试用例参考

## 📝 注意事项

1. **跨域问题**：如果iframe无法加载，请使用本地服务器
2. **数据持久化**：✅ Mock数据已自动保存到localStorage，刷新页面后数据保持不变
3. **清除数据**：如需重新生成Mock数据，在浏览器控制台执行：`MockData.clearCache()` 然后刷新页面
4. **图表渲染**：首次加载可能需要等待ECharts资源加载
5. **性能优化**：大数据量时建议启用虚拟滚动（需要实际开发）

## ❓ 常见问题

### Q1: 为什么选择租户后没有数据？
**A**: 这个问题已在当前版本中解决！Mock数据现在会自动保存到浏览器的localStorage中，确保在不同页面间数据一致性。

如果仍遇到此问题，可能是因为：
1. 浏览器禁用了localStorage
2. 使用隐私模式浏览

**解决方法**：
- 使用正常浏览模式
- 确保浏览器允许localStorage
- 使用本地服务器运行（推荐）

### Q2: 如何重新生成Mock数据？
**A**: 在浏览器控制台执行以下命令：
```javascript
MockData.clearCache()
```
然后刷新页面即可生成新的Mock数据。

### Q3: iframe页面无法加载怎么办？
**A**: 这是跨域问题，使用本地服务器即可解决：
```bash
python -m http.server 8000
# 然后访问 http://localhost:8000/index.html
```

### Q4: 如何添加新的配额类型？
**A**: 编辑 `assets/js/mock-data.js` 文件中的 `getUserQuota` 函数，在 `quotaTypes` 数组中添加新的配额类型。

## 🔄 与用户管理原型V5的区别

| 特性 | 用户管理原型V5 | 我的用量原型 |
|------|----------------|--------------|
| **目标用户** | 运营管理员 | 普通用户 |
| **主要功能** | 用户管理、数据分析 | 个人用量查看 |
| **租户选择** | 多选筛选 | 单选切换 |
| **配额展示** | 无 | 有（核心功能） |
| **数据范围** | 全平台数据 | 当前用户+选定租户 |
| **操作权限** | 管理操作 | 只读查看 |

## 📞 技术支持

如有问题或建议，请查看：
- 方案文档：`运营后台/用户管理V1.1.md`
- 设计规范：`assets/css/feishu-design.css`
- 用户管理原型V5：`用户管理原型V5/README.md`

## 📄 许可证

本原型仅供内部演示和开发参考使用。

---

**开发时间**：2025年10月
**版本**：V1.0
**状态**：✅ 已完成
