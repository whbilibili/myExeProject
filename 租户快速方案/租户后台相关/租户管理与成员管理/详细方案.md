您提的这一点非常重要！区分“个人租户”和“企业租户”是整个平台运营和商业模式的基石。在平台级管理后台中清晰地体现这一区别，对于支持、运营和数据分析都至关重要。

我将把这个核心区别深度整合到我们已经制定的详细方案中。这主要会影响到“租户管理”模块的展示和功能设计。

下面是更新后的方案，我已经将关于租户类型的考虑添加到了相应的位置，并用 **⭐** 标记了关键的更新点，以便您快速识别。

### **平台级租户与用户统一管理系统 - 最终方案设计 (V2)**

#### **一、 核心设计原则与架构思想**

本方案构建于现代多租户架构（Multi-Tenancy Architecture）之上，其核心是允许多个客户（租户）共享单一的软件实例，同时保证各自数据的严格隔离与安全。([参考: Multi-Tenancy Architecture - System Design](https://www.geeksforgeeks.org/multi-tenancy-architecture-system-design/))

我们的设计将严格遵循以下三大核心原则：

1.  **权责分离 (Separation of Concerns)**：
    *   **平台管理员 (Platform Admin)**：您的内部团队（运营、支持、销售），拥有对整个平台的“上帝视角”，负责管理租户生命周期、全局用户安全和商业化策略。
    *   **租户管理员 (Tenant Admin)**：您的客户，在平台授予的框架内，管理自己企业的人员、数据和功能分配。
2.  **⭐ 租户类型区分 (Tenant Type Distinction)**：
    *   **企业租户 (Enterprise Tenant)**：为团队协作设计，拥有组织架构、多成员管理、共享资源池等高级功能。订阅 `团队版`、`企业版` 等面向团队的计划。
    *   **个人租户 (Personal Tenant)**：为单个用户设计，聚焦个人生产力。通常在用户首次注册时自动创建。订阅 `个人免费版`、`个人专业版` 等面向个人的计划。
3.  **权限分层 (Layered Permissions)**：我们设计的平台级功能，不会干涉租户内的具体权限。我们将清晰区分：
    *   **功能权限 (Feature Permissions)**：决定“谁能用什么工具”，由租户管理员在租户内部分配。
    *   **数据权限 (Data Permissions)**：决定“谁能动什么数据”，由空间或资源所有者在租户内管理。
    *   **资源配额 (Resource Quotas)**：决定“能用多少资源”，由平台方定义，可由租户管理员监控或内部分配。
4.  **安全与审计优先 (Security & Audit First)**：平台管理员的每一项关键操作都必须有据可查，确保系统的安全与合规。

---

### **二、 平台级租户管理 (Tenant Management)**

这是为平台管理员设计的核心模块，用于管理所有客户的完整生命周期。

#### **2.1 租户列表仪表盘**

平台管理员登录后看到的主界面，提供所有租户的宏观视图。

*   **租户列表**：
    *   **核心字段**：租户ID、租户名称、**⭐ 租户类型 (个人/企业)**、订阅计划、状态 (活跃、禁用、试用中、待删除)、主管理员、成员数、核心资源用量、创建时间。
    *   **交互功能**：支持全局模糊搜索、按“状态”、“订阅计划”以及 **⭐“租户类型”** 进行高级筛选、支持按任意字段排序。
*   **关键操作**：
    *   **创建租户**：手动为新客户创建**企业租户**，并指定初始管理员和订阅计划。个人租户通常由用户注册时自动创建，无需平台管理员手动干预。

#### **2.2 租户详情与操作**

点击具体租户后进入的精细化管理页面。**页面的功能模块会根据租户类型动态展示**。

*   **1. 订阅与配额管理**：
    *   **变更计划**：
        *   **⭐ 若为企业租户**：可为其在`团队版`、`企业版`等计划间升级/降级。
        *   **⭐ 若为个人租户**：可为其在`个人免费版`、`个人专业版`等计划间切换。
    *   **微调配额**：为有特殊需求的客户，在基础配额外增加额外的资源（如“+50GB存储空间”）。
    *   **设置有效期**：为客户的订阅计划设置或延长到期时间。
*   **2. 状态管理**：
    *   **禁用/启用租户**：一键禁用或启用租户，被禁用的租户下所有成员将无法登录。用于处理欠费或违规客户。（此功能对两种租户类型都适用）。
*   **3. ⭐ 成员与组织代管理 (白手套服务) - 企业租户专属**：
    *   此功能**仅在查看企业租户详情时可用**。
    *   **入口**：提供“组织管理”入口，进入特殊的“后台管理模式”。
    *   **安全警示**：进入后，页面顶部出现不可关闭的醒目横幅，提示“您正在以平台管理员身份管理租户 [租户名称]”，以防误操作。
    *   **功能复用**：界面和功能完全复用租户管理员使用的【成员与组织管理】模块，允许平台管理员代客进行创建部门、邀请/移除成员等操作。
    *   **审计日志**：在此模式下的所有写操作均被详细记录。
*   **4. 删除租户 (高风险)**：
    *   采用业界最佳实践的两阶段删除模式，参考[微软Entra ID的删除流程](https://learn.microsoft.com/en-us/entra/identity/users/directory-delete-howto)。
    *   **阶段一：软删除**
        1.  **前置检查**：启动删除前，系统自动检查并要求管理员处理：有效的**付费订阅**、未结清的**账单**、租户内剩余的**成员和应用**等。
        2.  **手动确认**：要求管理员手动输入租户全名以确认操作。
        3.  **置为“待删除”**：将租户状态更新为`待删除`，并设置30-90天的数据保留期。期间租户无法登录，但管理员可从后台撤销删除。
    *   **阶段二：硬删除**：保留期过后，系统自动或经二次确认后，永久、不可逆地清除所有租户数据。
    *   **⭐ 类型差异**：删除个人租户通常与删除其所有者用户账号的流程紧密相连，需要有明确的规则定义。
*   **5. 高级支持功能**：
    *   **模拟登录 (Impersonate)**：允许技术支持人员在获得授权和记录日志的前提下，模拟为租户管理员登录，以排查问题。

---

### **三、 平台级全局用户管理 (Global User Management)**

此模块独立于租户，用于管理您平台上的所有注册用户。

#### **3.1 全局用户列表**

*   **核心字段**：用户ID、用户名、邮箱/手机、⭐ **主属个人租户ID**、⭐ **所在企业租户列表**、全局状态 (活跃、已禁用)、注册时间、最近登录IP和时间。
*   **交互功能**：支持按用户各字段精确或模糊搜索，按状态筛选。

#### **3.2 用户详情与操作**

*   **信息展示**：显示用户基本资料，并**⭐ 清晰地区分**：
    *   该用户**拥有的个人租户** (通常只有一个)。
    *   该用户作为成员**加入的企业租户列表**。
*   **全局操作**：
    *   **全局禁用用户**：最高级别的封禁，禁止用户登录平台下的任何租户。
    *   **强制重置密码**：当发现账户风险时，强制用户下次登录时必须修改密码。
*   **权责界限**：平台管理员在此处的操作仅限于平台级安全，**不可**修改用户在特定租户内的角色或权限。

---

### **四、 演进路线与总结**

为确保项目顺利实施，建议采用分阶段的演进路线：

1.  **第一阶段 (MVP)**：实现租户和用户的基本CRUD，以及核心的“禁用/启用”状态管理。在UI上明确区分个人与企业租户。
2.  **第二阶段 (商业化核心)**：构建强大的“订阅与配额管理”功能，支持为不同租户类型提供和变更不同的订阅计划。实现“删除租户”的软删除阶段。
3.  **第三阶段 (高级支持与完善)**：在有明确需求后，开发针对企业租户的“成员代管理”、“模拟登录”等高级支持功能，并完善“删除租户”的硬删除流程和自动化。

这份方案为您提供了一个从宏观到微观的、结构化的平台管理系统设计。它不仅解决了您提出的所有功能点，更重要的是建立了一套权责清晰、安全可靠、可灵活扩展的框架，为您未来的商业化运营和客户支持奠定了坚实的基础。