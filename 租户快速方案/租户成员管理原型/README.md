# 租户成员管理原型

> 专为租户管理员设计的成员管理界面，采用右侧抽屉式详情展示，提供完整的成员信息管理和数据分析功能。

## 📋 项目概述

这是一个功能完整的租户成员管理系统原型，专为租户管理员视角设计，提供成员列表、详情查看、权限管理等功能。

### 核心特性

- ✅ **成员管理**：完整的成员列表、筛选、搜索功能
- 🎨 **抽屉式详情**：右侧抽屉展示成员详细信息
- 📊 **数据分析**：复用数据总览、资源消耗、资产明细功能
- 🏢 **组织架构**：支持部门层级、直属上级管理
- 🔐 **权限控制**：所有者、管理员、成员、空间创建员四种角色
- 📱 **响应式设计**：适配桌面端和移动端
- 💾 **Mock数据**：完整的模拟数据系统

## 🗂️ 项目结构

```
租户成员管理原型/
├── tenant-members.html        # 主页面 - 成员列表
├── assets/                    # 资源文件
│   ├── css/
│   │   └── feishu-design.css  # 飞书设计系统样式
│   └── js/
│       ├── utils.js           # 工具函数库
│       ├── mock-data.js       # Mock数据生成器
│       └── charts.js          # 图表工具库
├── pages/                     # 子页面（iframe嵌入）
│   ├── overview.html          # 数据总览
│   ├── consumption.html       # 资源消耗账单
│   └── assets.html           # 资产明细
└── README.md                  # 项目说明文档
```

## 🚀 快速开始

### 方法一：直接打开（推荐）

1. 直接在浏览器中打开 `tenant-members.html` 文件
2. 系统会自动加载所有资源和Mock数据
3. 点击成员列表中的任意行可打开详情抽屉

### 方法二：本地服务器

如果遇到跨域问题（iframe加载失败），可以使用本地服务器：

```bash
# 使用Python
python -m http.server 8000

# 或使用Node.js的http-server
npx http-server -p 8000

# 然后在浏览器访问
http://localhost:8000/tenant-members.html
```

## 📖 功能说明

### 1. 成员列表页 (tenant-members.html)

**统计仪表盘**
- 成员总数
- 管理员数量
- 空间创建员数量
- 部门数量

**筛选功能**
- 模糊搜索：支持成员名称、用户ID、手机、邮箱、部门
- 部门筛选：多选下拉，支持搜索
- 权限筛选：所有者/管理员/成员/空间创建员
- 状态筛选：全部/正常/已禁用
- 加入时间：日期范围选择

**成员列表**
- 成员基本信息展示
- 点击成员行打开详情抽屉
- 支持排序和分页

### 2. 成员详情抽屉

**基本信息区域**
- 成员头像和基本信息
- 归属部门、直属上级、权限信息
- 编辑按钮（所有者不可编辑）
- 从租户中移除按钮（所有者不可移除）

**编辑功能**
- 归属部门：级联选择器（部门树）
- 直属上级：下拉选择器（搜索成员）
- 权限：单选组（成员/管理员/空间创建员）

**三个标签页**（iframe嵌入）

#### 2.1 数据总览 (overview.html)
- **全局筛选器**：时间范围、租户（默认当前租户）
- **资产与使用总览**：
  - 资产创建总数（智能体、工作流、工具、工具库、知识库、空间）
  - 核心资产活跃度（运行次数、用户数、token消耗等）
- **积分总览**：
  - 核心指标（总消耗、Token消耗、设备抵扣）
  - 4个可视化图表（趋势图、构成图、排行榜、分布图）
- **核心资源消耗分析**：
  - Token消耗分析（3个图表）
  - 设备时长分析（3个图表）

#### 2.2 资源消耗账单 (consumption.html)
- **高级筛选器**：
  - 时间范围、资源类型、行为关键词
  - 变动类型、计费租户（默认当前租户）、是否消耗积分
- **资源消耗流水表格**：
  - 详细记录每笔资源消耗
  - 支持排序和分页
  - 一键导出CSV

#### 2.3 资产明细 (assets.html)
- **6个资产类型**（内嵌标签页）：
  - 智能体：运行次数、用户数、对话次数、token消耗
  - 工作流：运行次数、用户数、token消耗、成功率
  - 工具：引用数统计
  - 工具库：状态、类型、工具数
  - 知识库：知识单元、引用次数、占用容量
  - 空间：类型、所有者、更新记录
- 每个列表支持搜索、筛选、排序、分页
- 租户筛选器默认选中当前租户

## 🎨 设计特色

### 飞书设计系统
- 统一的色彩规范（主色、成功、警告、危险）
- 完整的间距系统（基于4px）
- 标准的字体层级和行高
- 精心设计的阴影和圆角
- 流畅的动画效果

### 抽屉式交互
- 右侧滑出式抽屉（1200px宽度）
- 基本信息卡片式布局
- 标签页内容通过iframe嵌入
- 遮罩层和关闭动画

### 权限管理
- 四种角色：所有者、管理员、成员、空间创建员
- 角色标签颜色区分
- 所有者权限保护（不可编辑、不可移除）
- 权限变更实时生效

## 🛠️ 技术栈

### 前端框架
- **Vue 3**：响应式前端框架
- **Element Plus**：企业级UI组件库
- **ECharts 5**：专业的数据可视化库

### 设计系统
- 自定义飞书设计系统CSS
- CSS变量系统
- 响应式布局

### 工具库
- 日期格式化
- 数字格式化
- 文本处理
- 防抖节流
- 数据导出

## 📊 Mock数据说明

项目内置完整的Mock数据系统，包括：

- **50个成员**：带有完整的个人信息和租户关联
- **10个部门**：两级部门结构（一级部门+二级部门）
- **组织关系**：直属上级、部门归属
- **权限分配**：四种角色合理分布
- **资产数据**：智能体、工作流、工具、知识库、空间
- **资源消耗记录**：50-150条真实感的资源消耗流水
- **统计数据**：各类汇总和趋势数据

所有数据支持：
- ✅ 搜索和筛选
- ✅ 排序
- ✅ 分页
- ✅ 动态生成

## 🔧 自定义配置

### 修改主题色

编辑 `assets/css/feishu-design.css` 文件中的CSS变量：

```css
:root {
  --primary-color: #3370FF;  /* 修改为你的主色 */
  --success-color: #00B42A;  /* 成功色 */
  --warning-color: #FF7D00;  /* 警告色 */
  --danger-color: #F53F3F;   /* 危险色 */
}
```

### 修改Mock数据

编辑 `assets/js/mock-data.js` 文件：

```javascript
// 修改成员数量
function generateTenantMembers(tenantId, count = 50) {  // 改为你需要的数量
  // ...
}
```

## 📱 浏览器兼容性

- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+

**注意**：需要支持ES6+语法和现代CSS特性。

## 🎯 使用场景

### 开发阶段
- 产品设计评审
- 前端开发参考
- 交互流程演示

### 展示阶段
- 客户方案演示
- 用户体验测试
- 功能培训演示

### 文档阶段
- 需求文档配图
- 开发文档说明
- 测试用例参考

## 📝 注意事项

1. **跨域问题**：如果iframe无法加载，请使用本地服务器
2. **数据持久化**：✅ Mock数据已自动保存到localStorage，刷新页面后数据保持不变
3. **清除数据**：如需重新生成Mock数据，在浏览器控制台执行：`MockData.clearCache()` 然后刷新页面
4. **图表渲染**：首次加载可能需要等待ECharts资源加载
5. **性能优化**：大数据量时建议启用虚拟滚动（需要实际开发）

## ❓ 常见问题

### Q1: 为什么抽屉中的iframe页面无法加载？
**A**: 这是跨域问题，使用本地服务器即可解决：
```bash
python -m http.server 8000
# 然后访问 http://localhost:8000/tenant-members.html
```

### Q2: 如何重新生成Mock数据？
**A**: 在浏览器控制台执行以下命令：
```javascript
MockData.clearCache()
```
然后刷新页面即可生成新的Mock数据。

### Q3: 为什么所有者不能编辑和移除？
**A**: 这是业务逻辑保护，所有者是租户的最高权限角色，不能随意修改或移除。

### Q4: 如何修改抽屉宽度？
**A**: 在 `tenant-members.html` 中找到抽屉组件，修改 `size` 属性：
```html
<el-drawer size="1200px">  <!-- 修改为你需要的宽度 -->
```

## 🔄 版本历史

### V1.0 (当前版本)
- ✅ 从零构建租户成员管理原型
- ✅ 实现右侧抽屉式详情展示
- ✅ 支持部门层级和权限管理
- ✅ 复用数据总览、资源消耗、资产明细功能
- ✅ 适配租户管理员视角
- ✅ 完整的Mock数据系统

## 📞 技术支持

如有问题或建议，请查看：
- 设计规范：`assets/css/feishu-design.css`
- Mock数据：`assets/js/mock-data.js`

## 📄 许可证

本原型仅供内部演示和开发参考使用。

---

**开发时间**：2025年10月
**版本**：V1.0
**状态**：✅ 已完成
