一、调研

https://www.coze.cn/open/docs/guides/model_service

二、方案

2.1 扣费规则

在Bots平台，所有Bots计费资源的消耗默认通过积分点进行抵扣。

2.2 计费公式

模型服务费 = token 使用量 ✖️ 模型 token 单价。每个模型 token 的单价不同



2.3 模型定价表

为了制定合理的积分消耗规则，首先需要对模型进行分级。通常，模型的成本与其能力、上下文长度、是否支持多模态（Vision）以及部署方式（自研/外采）强相关。将模型分为四个等级：经济型、标准型、高级型、旗舰型，并为输入（Prompt Tokens）和输出（Completion Tokens）分别定价，因为输出通常计算成本更高。

定价原则：

输入 vs 输出: 输出token的积分消耗通常是输入的1.5倍至3倍。我们这里统一采用2倍的简单模型。

能力溢价: 更智能、上下文更长、具备多模态或Function Call能力的模型，其积分消耗更高。

1 积分 = 0.001 w币: 设定一个虚拟的锚定价值，便于后续设计充值包。

模型token消耗积分表 (V1.0)



模型系列

模型名称

输入 (每1k tokens)

输出 (每1k tokens)

定级

备注



Doubao

Doubao-pro-32k-0528

2 点

4 点

经济型

高性价比，适合通用任务



Doubao-pro-128k

4 点

8 点

标准型

长文本处理能力



Doubao-1.5-vision-pro-32k

5 点

10 点

标准型

多模态，支持图像识别



LongCat

LongCat-VL-Mini

2 点

4 点

经济型

美团自研，多模态入门



LongCat-VL-Medium

4 点

8 点

标准型

增强版多模态



LongCat-Medium-32K-Chat

4 点

8 点

标准型

自研，支持函数调用



LongCat-MoE-3B-32K-Chat

3 点

6 点

经济型

高效MoE架构



LongCat-Large-32K-Chat

10 点

20 点

高级型

自研系列中最先进的模型



MiniCPM

MiniCPM-V-2_6

5 点

10 点

标准型

优秀的开源多模态模型



abab

abab6.5-chat

3 点

6 点

经济型

8k上下文，通用对话



abab6.5s-chat

10 点

20 点

高级型

240k超长上下文



abab6.5g-chat / abab6.5t-chat

4 点

8 点

标准型

适用于特定场景对话



Claude

anthropic.claude-3-sonnet

15 点

30 点

高级型

强大的多模态与推理



anthropic.claude-3.5-sonnet-v2

20 点

40 点

高级型

增强的代码与视觉能力



anthropic.claude-3-opus

80 点

160 点

旗舰型

Claude系列顶级模型，昂贵



anthropic.claude-3.7-sonnet

100 点

200 点

旗舰型

Claude系列顶级模型，昂贵



anthropic.claude-sonnet-4

100 点

200 点

旗舰型

Claude系列顶级模型，昂贵



DeepSeek

deepseek-chat

1 点

2 点

经济型

性价比极高的通用模型



deepseek-coder

2 点

4 点

经济型

专注于代码生成



(自部署) deepseek-v3/r1

8 点

16 点

高级型

自有部署，性能稳定



(外采) Doubao-deepseek-*

4 点

8 点

标准型

外部云服务，有额外成本



(外采) baidu/huawei-deepseek-*

5 点

10 点

标准型

外部云服务，有额外成本



GPT

gpt-3.5-turbo-*

2 点

4 点

经济型

经典的GPT-3.5系列



gpt-4o-mini

8 点

16 点

标准型

GPT-4o的经济版



gpt-4-turbo-2024-04-09

25 点

50 点

高级型

经典的GPT-4 Turbo



gpt-4o-2024-08-06

20 点

40 点

高级型

新版GPT-4o，更具性价比



gpt-4.1-nano

15 点

30 点

高级型

4.1系列速度最快



gpt-4.1-mini

40 点

80 点

旗舰型

接近GPT-4.1的性能



gpt-4.1

120 点

240 点

旗舰型

OpenAI顶级模型，最昂贵



moonshot

moonshot-v1-32k

8 点

16 点

标准型

月之暗面通用模型



moonshot-v1-128k

15 点

30 点

高级型

长文本处理能力



qwen

Qwen-VL-Chat / Qwen2-VL

4 点

8 点

标准型

通义千问视觉模型



qwen-max-latest

10 点

20 点

高级型

Qwen系列效果最好



(自部署) qwen3-235b-*

50 点

100 点

旗舰型

自部署旗舰，成本高



glm

glm-4v-plus

8 点

16 点

标准型

智谱视觉模型



google

gemini-2.5-flash-lite

2 点

4 点

经济型

Gemini系列高性价比



gemini-2.5-flash

4 点

8 点

标准型

Gemini高性能版



gemini-2.5-pro

30 点

60 点

高级型

Google最先进模型之一

模型定价配置表原型：

后台管理系统：【Bots管理】下新增一个tab，模型定价管理。

页面标题：模型定价管理。

页面全局提示文案：在这里集中配置、审查和调整所有大模型的积分消耗定价策略。

列表字段：模型厂商、模型名称、输入 (每1k tokens)价格、输出 (每1k tokens)价格、定级、模型描述、操作（编辑）

点击编辑弹出弹窗，可修改模型的定级、输入 (每1k tokens)的价格、输出 (每1k tokens)的价格

搜索：模型名称、模型厂商（多选）、定级（多选）

支持分页

支持批量编辑：支持批量更改定级、输入 (每1k tokens)的价格、输出 (每1k tokens)的价格

批量更改定级：经济型、标准型、高级型、旗舰型；默认回填为空，选项为空时，则不更改

输入 (每1k tokens)价格：大于等于0的整数，默认回填为空，选项为空时，则不更改

输出 (每1k tokens)的价格：大于等于0的整数，默认回填为空，选项为空时，则不更改



2.4 模型Token消耗与积分计费系统

2.4.1. 核心概念：统一资源单位——“积分”

为了简化计费系统并具备扩展性，租户权益引入一个虚拟的、统一的资源单位——积分 (Points)。

定义: “积分”是平台内所有消耗型资源的统一度量衡。无论是调用大模型消耗的token，还是超出知识库容量的存储，都将折算成积分进行扣除。

价值: 用户可以通过充值购买积分，也可以通过订阅套餐每月获赠一定数量的免费积分。

好处:

对用户: 只需关注一个“积分余额”，无需理解不同资源的复杂换算。

对平台: 未来增加新的付费功能（如AI绘图、语音合成）时，只需为其制定新的积分消耗标准，即可无缝接入现有计费系统。

注意事项

积分的消耗，按千token若干点积分进行计算，若不够千token，则需要按比例进行积分的扣除，因此建议不要使用浮点数（float 或 double）进行计费计算，使用Decimal类型，或者BigDecimal 库/类型进行高精度计算，建议精度为小数点后6到8位。

2.4.2. 套餐权益设计：每月免费积分额度

每个订阅套餐都将包含每月免费赠送的积分额度，这些额度用于覆盖用户的基本用量，是套餐价值的核心体现。

特性 / 套餐

试用版 (Free)

团队版 (Team)

企业版 (Enterprise)

免费积分

3,000点/月

30,000点/月

3,000,000点/月

积分特性

每月1日重置，不累积

每月1日重置，不累积

每月1日重置，不累积

积分用途

可用于抵扣所有大模型的Token消耗

可用于抵扣所有大模型的Token消耗

可用于抵扣所有大模型的Token消耗

设计逻辑: 免费额度是吸引用户升级的核心动力。团队版额度应能满足一个中小型团队的常规使用，而企业版则提供更充裕的额度以应对更高的使用频率。

2.4.3. 计费与超额规则：“用完即停，引导充值”

对于MVP阶段，我们采用最简单、对用户最友好的“用完即停”模型。

计费流程:

用户每次调用模型API时，后端会根据实际的输入和输出Token数量，以及上表中的模型单价，计算出本次调用应消耗的积分。

系统会实时从用户的“积分余额”中扣除相应数额。

超额规则:

返回明确错误: 模型响应时，计算相应的输入、输出token以及消耗的积分，当消耗积分大于余额时，API应返回一个清晰的错误信息。若用户对话调用，则错误信息需要抛出至chat区；若用户API或SDK调用，则需要将错误信息在API响应中明确抛出。

“当前租户积分余额不足，无法完成本次调用。建议联系租户管理员（xxxx、xxxx）充值积分，以便继续使用服务。”

无透支: MVP阶段不提供“先用后付”或“积分透支”功能，确保不会产生意外的账单和催收问题。

2.4.4. 积分的获取与管理

主要来源：购买积分包

用户可以在“租户权益”页面随时购买积分。

购买的积分永不过期，与每月赠送的积分分开存储和计算。

消耗优先级: 当用户同时拥有“每月免费积分”和“购买的积分”时，系统应优先消耗即将过期的“每月免费积分”。

在租户后台的积分展示卡片中，增加 tips icon，hover展示积分构成详情，如下图所示

示例：

积分构成详情

每月免费额度：500/10,000（剩余积分/总积分）

购买的积分：6,000

免费额度将于 xx月xx日重置。：这里的xx月xx日，就是下个月积分重置的时间，套餐内的免费积分是每月1号重置。



2.4.5. 操作记录 - 大模型调用消耗记录（个人和租户维度都要有）

操作记录 - 大模型调用消耗记录：

在“租户权益”的“操作记录”表格中，增加以下类型的日志记录。

1. 基础字段

资源类型: Token

行为:

格式: 调用 [模型名称]

说明: 记录用户调用的具体模型名称，以清晰追溯。

示例: 调用 GPT-4o, 调用 Gemini 2.5 Pro

变动类型: 消耗

用户: 实际发起模型调用的用户名。

2. “用量” 字段设计

此字段用于展示本次调用消耗的总 Token 数量。

表格内展示规则 (Display Rule):

若总消耗 < 10,000: 直接显示精确整数，建议增加千位分隔符。

示例: 7,894

若总消耗 ≥ 10,000: 以“万”为单位，数值保留一位小数（四舍五入）。

示例: 12,345 Token 展示为 1.2万。

悬浮提示详情 (Tooltip Detail):

触发: 鼠标悬浮于“Token 用量”数值旁的提示图标 (i) 上时显示。

内容结构:

输入 Token：[精确整数] 个

输出 Token：[精确整数] 个

总计 Token：[精确整数] 个

示例:

Token消耗详情

输入Token：4,567 个

输出Token：7,778 个

总计Token：12,345 个

3. “消耗积分” 字段设计

此字段用于展示本次调用所扣除的总积分。

表格内展示规则 (Display Rule):

若总消耗 < 10,000 积分: 直接显示数值，并保留两位小数（四舍五入）。

示例: 7,894.12

若总消耗 ≥ 10,000 积分: 以“万”为单位，数值保留一位小数（四舍五入）。

示例: 12,345.67 积分展示为 1.2万。

悬浮提示详情 (Tooltip Detail):

触发: 鼠标悬浮于“消耗积分”数值旁的提示图标 (i) 上时显示。

内容结构:

输入部分消耗：[高精度数值] 积分

输出部分消耗：[高精度数值] 积分

总计消耗：[高精度数值] 积分

说明: 详情中的数值应为后台数据库记录的原始高精度值，以确保财务对账的准确性。建议精度为小数点后 6-8 位。

示例:

积分消耗详情

输入部分消耗：5.48040000 积分

输出部分消耗：6.86527000 积分

总计消耗：12.34567000 积分
