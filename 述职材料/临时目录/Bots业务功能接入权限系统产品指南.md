1. 文档概述

1.1. 目的

本指南旨在为Bots平台各功能模块的产品经理（PM）提供一套清晰、标准化的流程和规范，用于在产品设计阶段，将新功能无缝对接到平台统一的权限体系中。遵循本指南可以确保平台所有模块的权限逻辑一致、用户体验统一，并减少不必要的研发沟通成本。

1.2. 核心理念

平台的权限体系构建于两大核心理念之上：

统一的角色模型: 所有资源（空间、智能体、Prompt、数据集等）共享一套标准的角色体系（所有者、管理员、可编辑、查看与使用），确保权限概念的普适性和易理解性。

默认继承，自定义覆盖: 这是权限管理的核心机制。子资源默认继承其所属“空间”的权限设置，实现了“改一处，处处生效”的高效管理。同时，平台也支持对单个资源进行独立的权限配置，提供了必要的灵活性。

1.3. 基础组件说明

平台已经将权限管理的核心功能抽象为标准化的前端组件和后端服务。

前端: “协作者管理”或“权限赋予”的弹窗UI及交互逻辑已封装为通用组件。

后端: 权限的存储、继承与覆盖逻辑、角色与权限点的映射等已由底层服务统一处理。

因此，各模块PM在设计时，无需重新设计权限赋予的页面和基础逻辑，只需关注业务功能与标准权限模型的结合即可。

2. 权限模型核心概念

在开始设计之前，请务必理解以下核心概念：

概念

描述

资源 (Resource)

权限管理的最小单位。分为 容器资源（空间）和 功能资源（如：智能体、工作流、Prompt、数据集等）。所有功能资源都必须从属于一个空间。

角色 (Role)

定义了用户对特定资源所拥有的权限集合。平台预设了四种标准角色，权限级别由高到低排序：

1. 所有者 (Owner): 资源的创建者，拥有最高权限，包括删除。

2. 管理员 (Admin): 拥有除删除外的所有管理权限，包括配置权限。

3. 可编辑 (Editor): 拥有资源内容的编辑和使用权限，但不能管理权限或删除。

4. 查看与使用 (Viewer): 仅拥有对资源的只读访问和使用权限。

权限继承 (Inheritance)

新创建的功能资源，其权限设置 默认且动态地 同步其所属空间的权限。

权限覆盖 (Override)

用户可以为单个功能资源设置一套独立的权限规则（即“自定义权限”）。一旦启用，该资源将与其父级空间的权限完全脱钩。

创建者规则

任何资源的创建者，将自动成为该资源的 所有者，且该身份不可被其他管理员移除或降级。

3. 新功能接入步骤 (Product Design Checklist)

当您负责一个新功能模块（例如：“评测模块”、“Prompt管理模块”）时，请遵循以下步骤进行权限相关的产品设计。

步骤一：定义模块的核心资源

首先，您需要明确模块内可被独立管理和授权的核心“功能资源”是什么。

示例:

在“评测模块”中，核心资源可能是 数据集、验证规则 和 测试任务。

在“Prompt管理模块”中，核心资源就是 Prompt。

设计要求:

明确列出您的模块包含哪些核心功能资源。

确认所有这些资源都必须从属于一个“空间”。

步骤二：定义资源的创建权限

接下来，定义哪些角色的用户有权创建您的核心资源。

平台标准: 空间维度的 所有者、管理员、可编辑 角色拥有在其空间下创建新资源的权限。查看与使用 角色无创建权。

设计要求:

在您的产品需求文档（PRD）中明确规定，遵循平台标准创建权限。

前端UI控制: 对于无创建权限的角色（如 查看与使用），需要明确要求前端隐藏或禁用“新建/创建”按钮。平台标准是：禁用。

步骤三：构建“角色-权限”矩阵 (核心步骤)

这是产品设计中至关重要的一步。您需要详细定义不同角色在您的功能资源中能做什么、不能做什么，以及对应的UI表现(如：隐藏或禁用某个功能对应的按钮)。

请为您的每一个核心资源，创建一份如下格式的矩阵：

资源名称：[例如：Prompt]

功能点/操作

所有者 (Owner)

管理员 (Admin)

可编辑 (Editor)

查看与使用 (Viewer)

访问/查看

✅

✅

✅

✅

编辑内容

✅

✅

✅

❌ (页面/控件只读或禁用)

删除资源

✅

❌ (隐藏删除按钮)

❌ (隐藏删除按钮)

❌ (隐藏删除按钮)

发布/提交新版

✅

✅

✅

❌ (隐藏相关操作)

管理权限

✅

✅

❌ (隐藏权限管理入口)

❌ (隐藏权限管理入口)

[其他业务操作1]

...

...

...

...

[其他业务操作2]

...

...

...

...

设计要求:

罗列所有操作: 在第一列，穷举出用户可以对您的资源进行的所有关键操作。

分配权限: 为每个操作和每个角色标记权限（✅ 或 ❌）。

明确UI控制: 对于标记为 ❌ 的权限，必须在括号中用粗体明确注明前端的UI控制方式。这是必须的，也是最重要的部分。例如：

(隐藏 xxx 按钮)

(禁用 xxx 输入框)

(xxx 区域整体置灰，不可交互)

(表格中不显示此操作项)

等等

步骤四：规划权限管理入口

您的模块需要提供一个入口，以便用户可以打开平台统一的“权限管理”组件，对您的资源进行自定义授权。



平台标准入口位置:

例如：在资源列表页的“...”更多操作菜单中。

例如：在资源详情页的右上角“...”或其他设置区域。

设计要求:

在您的产品原型和PRD中，明确标出“权限管理”或“协作者管理”的入口位置。

根据“角色-权限”矩阵，此入口只对 所有者 和 管理员 可见。

4. 后端技术对接要求 (产品须知)

作为PM，您不需要了解后端实现的技术细节，但需要明确提出以下要求，以确保功能的完整性和安全性。

所有接口必须进行权限校验: 要求后端开发人员，模块内所有对资源进行增、删、改、查操作的API接口，都必须在处理业务逻辑前，调用统一的权限服务，对当前操作用户的身份和角色进行严格的权限校验。

遵循继承与覆盖逻辑: 后端在进行权限校验时，必须能正确处理资源的“默认继承”和“自定义权限”两种状态。

支持标准权限组件API: 确保后端能够正确响应和处理来自前端标准化“权限管理”组件的API请求（如：添加协作者、修改角色、移除协作者、恢复继承等）。

5. 复杂场景设计考量

当您的模块涉及到一些高级功能时，需要提前思考权限在这些场景下的表现。

资源转移:

场景: 如果您的资源支持从一个空间移动到另一个空间。

设计要点: 需明确移动后权限的变化规则。参考平台标准：

若资源是“默认继承”，移动后将自动继承新空间的权限。

若资源是“自定义权限”，移动后其权限设置保持不变。

UI要求: 在转移操作的二次确认弹窗中，必须有明确的文案提示用户权限将如何变更。

创建副本/克隆:

场景: 如果您的资源支持被复制到当前或其他空间。

设计要点: 复制产生的新资源应被视为一个全新的资源，其权限默认继承目标空间的权限，创建者（即操作者）成为该副本的管理员。

批量操作:

场景: 用户可以勾选多个资源进行批量删除、批量移动等。

设计要点: 用户勾选的资源可能权限不同。操作时，系统应只对用户有权限的资源执行操作。

UI要求: 操作完成后，应向用户给出清晰的反馈。例如：“您选择了10个数据集，成功删除7个，有3个因权限不足无法删除。”

通过链接访问

不论用户是否在当前租户下，用户都可以通过分享的资源链接，访问有权限的资源。跨租户访问时，系统会弹出弹窗，要求用户切换租户，切换租户后，自动定位到资源链接。

6. 总结

Bots平台的统一权限体系是保障平台安全、稳定和用户体验一致性的基石。各模块产品经理在进行产品设计时，务必严格遵循本指南，充分利用平台提供的标准化能力，将权限设计无缝融入到业务功能中。如有任何疑问或遇到本指南未覆盖的特殊场景，请及时与wanghong52沟通。技术侧的接入，根据下表请联系相应的前后端负责人。